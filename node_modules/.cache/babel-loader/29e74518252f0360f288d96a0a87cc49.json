{"remainingRequest":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/babel-loader/lib/index.js!/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mech-user/Documents/minraji/utsprint/minraji/src/components/chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/src/components/chat.vue","mtime":1588998491281},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbWVjaC11c2VyL0RvY3VtZW50cy9taW5yYWppL3V0c3ByaW50L21pbnJhamkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQVBJLCB7IGdyYXBocWxPcGVyYXRpb24gfSBmcm9tICdAYXdzLWFtcGxpZnkvYXBpJzsKaW1wb3J0IHsgQXV0aCB9IGZyb20gJ2F3cy1hbXBsaWZ5JzsKaW1wb3J0IHsgY3JlYXRlTWVzc2FnZSB9IGZyb20gIi4uL2dyYXBocWwvbXV0YXRpb25zIjsKaW1wb3J0IHsgbGlzdE1lc3NhZ2VzIH0gZnJvbSAnLi4vZ3JhcGhxbC9xdWVyaWVzJzsKaW1wb3J0IHsgb25DcmVhdGVNZXNzYWdlIH0gZnJvbSAnLi4vZ3JhcGhxbC9zdWJzY3JpcHRpb25zJzsKd2luZG93LkxPR19MRVZFTCA9ICdWRVJCT1NFJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjaGF0JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZXM6IFtdLAogICAgICBjb250ZW50OiAiIiwKICAgICAgdXNlck5hbWU6ICIiLAogICAgICBzdWJzY3JpcHRpb246IHt9LAogICAgICBlcnJvcjogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7Ly8gVE9ETygxKSBHcmFwaFFM44Ko44Oz44OJ44Od44Kk44Oz44OI44GrTXV0YXRpb27jgpLnmbrooYzjgZfjgIHjg6Hjg4Pjgrvjg7zjgrjjgpLnmbvpjLLjgZnjgosKICAgIH0sCiAgICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7Ly8gVE9ETygyKSBHcmFwaFFM44Ko44Oz44OJ44Od44Kk44Oz44OI44GrUXVlcnnjgpLnmbrooYzjgZfjgIHjg6Hjg4Pjgrvjg7zjgrjkuIDopqfjgpLlj5blvpfjgZnjgosKICAgIH0sCiAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZSgpIHsvLyBUT0RPKDMtMSkgR3JhcGhRTOOCqOODs+ODieODneOCpOODs+ODiOOBq1N1YnNjcmlwdGlvbuOCkueZuuihjOOBl+OAgW11dGF0aW9u44KS55uj6KaW44GZ44KLCiAgICB9LAogICAgc2Nyb2xsQm90dG9tOiBmdW5jdGlvbiBzY3JvbGxCb3R0b20oKSB7CiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCIubWVzc2FnZV9iYXNlIik7CiAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsSGVpZ2h0OwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBBdXRoLmN1cnJlbnRBdXRoZW50aWNhdGVkVXNlcigpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF90aGlzLnVzZXJOYW1lID0gX2NvbnRleHQuc2VudC51c2VybmFtZTsKCiAgICAgICAgICAgICAgX3RoaXMuZmV0Y2goKTsKCiAgICAgICAgICAgICAgX3RoaXMuc3Vic2NyaWJlKCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgey8vIFRPRE8oMy0yKSDjg4Hjg6Pjg4Pjg4jnlLvpnaLjgYvjgonpm6LjgozjgovpmpvjgavjgIFVblN1YnNjcmliZeOBmeOCiwogIH0sCiAgdXBkYXRlZDogZnVuY3Rpb24gdXBkYXRlZCgpIHsKICAgIHRoaXMuc2Nyb2xsQm90dG9tKCk7CiAgfQp9Ow=="},{"version":3,"sources":["chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAmBA,OAAA,GAAA,IAAA,gBAAA,QAAA,kBAAA;AACA,SAAA,IAAA,QAAA,aAAA;AACA,SAAA,aAAA,QAAA,sBAAA;AACA,SAAA,YAAA,QAAA,oBAAA;AACA,SAAA,eAAA,QAAA,0BAAA;AACA,MAAA,CAAA,SAAA,GAAA,SAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA,CACA;AACA,KAHA;AAIA,IAAA,KAJA,mBAIA,CACA;AACA,KANA;AAOA,IAAA,SAPA,uBAOA,CACA;AACA,KATA;AAUA,IAAA,YAVA,0BAUA;AACA,UAAA,SAAA,GAAA,KAAA,GAAA,CAAA,aAAA,CAAA,eAAA,CAAA;AACA,MAAA,SAAA,CAAA,SAAA,GAAA,SAAA,CAAA,YAAA;AACA;AAbA,GAXA;AA0BA,EAAA,OA1BA,qBA0BA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,IAAA,CAAA,wBAAA,EADA;;AAAA;AACA,cAAA,KAAA,CAAA,QADA,iBACA,QADA;;AAEA,cAAA,KAAA,CAAA,KAAA;;AACA,cAAA,KAAA,CAAA,SAAA;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,GA9BA;AA+BA,EAAA,aA/BA,2BA+BA,CACA;AACA,GAjCA;AAkCA,EAAA,OAAA,EAAA,mBAAA;AACA,SAAA,YAAA;AACA;AApCA,CAAA","sourcesContent":["<template>\n<div>\n  <div class=\"title\">\n    <h2>Amplifyで作るチャットアプリ</h2>\n  </div>\n  <div class=\"main-contents\">\n    <div class=\"message_base\">\n        <div v-for=\"message in messages\" :key=\"message.id\">\n          <div v-bind:class=\"[message.username === userName ? 'message' : 'message_opponent']\">{{message.content}}</div>\n          <div v-bind:class=\"[message.username === userName ? 'username' : 'username_opponent']\">{{message.username}}</div>\n        </div>\n    </div>\n    <el-input placeholder=\"メッセージを入力(Enterで送信)\" v-model=\"content\" @keydown.enter.native=\"sendMessage\"></el-input>\n    <div class=\"error\">{{ this.error }}</div>\n  </div>\n</div>\n</template>\n\n<script>\nimport API, {  graphqlOperation } from '@aws-amplify/api';\nimport { Auth } from 'aws-amplify'\nimport { createMessage } from \"../graphql/mutations\";\nimport { listMessages } from '../graphql/queries';\nimport { onCreateMessage } from '../graphql/subscriptions';\nwindow.LOG_LEVEL = 'VERBOSE';\nexport default {\n  name: 'chat',\n  data(){\n    return {\n      messages: [],\n      content: \"\",\n      userName: \"\",\n      subscription: {},\n      error: \"\"\n    }\n  },\n  methods :{\n    sendMessage(){\n      // TODO(1) GraphQLエンドポイントにMutationを発行し、メッセージを登録する\n    },\n    fetch(){\n      // TODO(2) GraphQLエンドポイントにQueryを発行し、メッセージ一覧を取得する\n    },\n    subscribe(){\n      // TODO(3-1) GraphQLエンドポイントにSubscriptionを発行し、mutationを監視する\n    },\n    scrollBottom() {\n      const container = this.$el.querySelector(\".message_base\");\n      container.scrollTop = container.scrollHeight;\n    }\n  },\n  async created(){\n    this.userName = (await Auth.currentAuthenticatedUser()).username;\n    this.fetch()\n    this.subscribe()\n  },\n  beforeDestroy() {\n    // TODO(3-2) チャット画面から離れる際に、UnSubscribeする\n  },\n  updated: function () {\n    this.scrollBottom()\n  }\n}\n</script>\n\n"],"sourceRoot":"src/components"}]}