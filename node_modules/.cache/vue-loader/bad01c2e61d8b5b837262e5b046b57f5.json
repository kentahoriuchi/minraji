{"remainingRequest":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vagrant/workspace/minraji/utsprint/minraji/src/components/calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/src/components/calendar.vue","mtime":1590294776000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":1588818758000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/babel-loader/lib/index.js","mtime":1588818754000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":1588818758000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/vue-loader/lib/index.js","mtime":1588818841000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUEksIHsgIGdyYXBocWxPcGVyYXRpb24gfSBmcm9tICdAYXdzLWFtcGxpZnkvYXBpJzsKLy8gaW1wb3J0IGNhbGVuZGFyIGZyb20gIi4vY2FsZW5kYXIiCmltcG9ydCB7IGxpc3RSb29tcyB9IGZyb20gJy4uL2dyYXBocWwvcXVlcmllcyc7CgppbXBvcnQgVXNlclN0b3JlIGZyb20gJy4uL21vYngvVXNlclN0b3JlJwoKaW1wb3J0IEZ1bGxDYWxlbmRhciBmcm9tICdAZnVsbGNhbGVuZGFyL3Z1ZScKaW1wb3J0IGRheUdyaWRQbHVnaW4gZnJvbSAnQGZ1bGxjYWxlbmRhci9kYXlncmlkJwppbXBvcnQgdGltZUdyaWRQbHVnaW4gZnJvbSAiQGZ1bGxjYWxlbmRhci90aW1lZ3JpZCI7CmltcG9ydCBpbnRlcmFjdGlvblBsdWdpbiBmcm9tICJAZnVsbGNhbGVuZGFyL2ludGVyYWN0aW9uIjsKaW1wb3J0IGphTG9jYWxlIGZyb20gIkBmdWxsY2FsZW5kYXIvY29yZS9sb2NhbGVzL2phIjsgLy8g5pel5pys6Kqe5YyW55SoCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2NhbGVuZGFyJywKICBjb21wb25lbnRzOiB7CiAgICBGdWxsQ2FsZW5kYXIgLy8gbWFrZSB0aGUgPEZ1bGxDYWxlbmRhcj4gdGFnIGF2YWlsYWJsZQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJOYW1lOiAiIiwKICAgICAgdXNlcklkOiAiIiwKICAgICAgbWVtYmVyczogW10sCiAgICAgIGVycm9yOiAiIiwKICAgICAgcm9vbXM6IFtdLAogICAgICBsb2NhbGU6IGphTG9jYWxlLCAvLyDml6XmnKzoqp7ljJYKICAgICAgLy8g44Kr44Os44Oz44OA44O844OY44OD44OA44O844Gu44OH44K244Kk44OzCiAgICAgIGNhbGVuZGFySGVhZGVyOiB7CiAgICAgICAgbGVmdDogInByZXYsbmV4dCB0b2RheSIsCiAgICAgICAgY2VudGVyOiAidGl0bGUiLAogICAgICAgIHJpZ2h0OiAiZGF5R3JpZE1vbnRoLFdlZWssRGF5LGxpc3RXZWVrIgogICAgICB9LAogICAgICBjYWxlbmRhcldlZWtlbmRzOiB0cnVlLCAvLyDlnJ/ml6XjgpLooajnpLrjgZnjgovjgYsKICAgICAgLy8g44Kr44Os44Oz44OA44O844Gn5L2/55So44GZ44KL44OX44Op44Kw44Kk44OzCiAgICAgIGNhbGVuZGFyUGx1Z2luczogW2RheUdyaWRQbHVnaW4sIHRpbWVHcmlkUGx1Z2luLCBpbnRlcmFjdGlvblBsdWdpbl0sCiAgICAgIC8vIOOCq+ODrOODs+ODgOODvOOBq+ihqOekuuOBmeOCi+OCueOCseOCuOODpeODvOODq+S4gOimpwogICAgICBjYWxlbmRhckV2ZW50czogWwogICAgICAgIC8vIFRPRE86IOODh+ODvOOCv+ODmeODvOOCueOBi+OCieWPluOBo+OBpuOBjeOBn+OChOOBpOOCkuWPjeaYoOOBp+OBjeOCi+OCiOOBhuOBq+OBmeOCi+OAggogICAgICBdLAogICAgICBjYWxlbmRhclNlbGVjdGFibGU6dHJ1ZSwKICAgICAgaXNNb2RhbEFjdGl2ZTogZmFsc2UsCiAgICAgIHJvb210aXRsZTogIiIKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGZldGNoKCl7CiAgICAgIC8v6YOo5bGL44OH44O844K/44KS5Y+W5b6XCiAgICAgIGNvbnN0IHJvb21saW1pdCA9IDEwMCAgLy8g6KGo56S644GZ44KL6YOo5bGL44Gu5pWw44GubWF4CiAgICAgIGNvbnN0IHJvb21zID0gYXdhaXQgQVBJLmdyYXBocWwoZ3JhcGhxbE9wZXJhdGlvbihsaXN0Um9vbXMse2xpbWl0OnJvb21saW1pdH0pKQogICAgICB0aGlzLnJvb21zID0gcm9vbXMuZGF0YS5saXN0Um9vbXMuaXRlbXMKICAgICAgLy8gY29uc29sZS5sb2coImluIGZldGNoIikKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yb29tcykKICAgICAgdGhpcy5hZGRDYWxlbmRhckV2ZW50cyh0aGlzLnJvb21zKQogICAgfSwKICAgIGFkZENhbGVuZGFyRXZlbnRzKHJvb21zKXsKICAgICAgY29uc29sZS5sb2coImFkZCBldmVudOOBruS4rSIpCiAgICAgIGZvciAoY29uc3Qgcm9vbSBpbiByb29tcyl7CiAgICAgICAgY29uc29sZS5sb2cocm9vbXNbMF0uaWQpCiAgICAgICAgY29uc29sZS5sb2cocm9vbXNbMF0udGlsdGUpCiAgICAgICAgY29uc29sZS5sb2cocm9vbXNbMF0uY3JlYXRlZEF0KQogICAgICAgIHRoaXMuY2FsZW5kYXJFdmVudHMucHVzaCh7CiAgICAgICAgICB0aXRsZTogcm9vbXNbcm9vbV0udGlsdGUsCiAgICAgICAgICBzdGFydDogbmV3IERhdGUoKS5nZXRUaW1lKCkgLy9yb29tc1tyb29tXS5jcmVhdGVkQXQKICAgICAgICAgIC8vIHN0YXJ0OiByb29tc1tyb29tXS5jcmVhdGVkQXQKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGV2ZW50Q2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIC8v44Kv44Oq44OD44Kv44GX44Gf44Kk44OZ44Oz44OI44Gu44K/44Kk44OI44Or44GM5Y+W44KM44KL44KICiAgICAgIC8vIGFsZXJ0KCdDbGlja2VkIG9uOiAnICsgaXRlbS50aXRsZSk7CiAgICAgIHRoaXMucm9vbXRpdGxlID0gZXZlbnQudGV4dAogICAgICB0aGlzLm9wZW5JdGVtKCkKICAgICAgY29uc29sZS5sb2coZXZlbnQpCiAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmV2ZW50LnRpdGxlKQogICAgfSwKICAgIG9wZW5JdGVtKCkgewogICAgICB0aGlzLnRvZ2dsZU1vZGFsKCk7CiAgICB9LAogICAgLyoqCiAgICAqIGFjdGl2ZeeKtuaFi+OCkuWIh+OCiuabv+OBiOOCi+OAggogICAgKi8KICAgIHRvZ2dsZU1vZGFsKCkgewogICAgICB0aGlzLmlzTW9kYWxBY3RpdmUgPSAhIHRoaXMuaXNNb2RhbEFjdGl2ZTsKICAgIH0sCiAgfSwKICBhc3luYyBjcmVhdGVkKCl7CiAgICBjb25zdCB7IHVzZXJuYW1lLHVzZXJpZCB9ID0gYXdhaXQgVXNlclN0b3JlCiAgICBjb25zb2xlLmxvZyhVc2VyU3RvcmUpCiAgICB0aGlzLnVzZXJOYW1lID0gdXNlcm5hbWUKICAgIHRoaXMudXNlcklkID0gdXNlcmlkIAogICAgdGhpcy5mZXRjaCgpCiAgICAvLyBjb25zb2xlLmxvZygiZmV0Y2ggZmluaXNoZWQhIikKICAgIC8vIGNvbnNvbGUubG9nKCJhZGQgZXZlbnTjga7liY0iKQogICAgdGhpcy5hZGRDYWxlbmRhckV2ZW50cyh0aGlzLnJvb21zKQogICAgLy8gY29uc29sZS5sb2coImFkZCBldmVudOOBruW+jCIpCiAgfQp9Cg=="},{"version":3,"sources":["calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"calendar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  <div class=\"p-modal\" :class=\"{'is-open': isModalActive}\">\n    <p>ポップアップテスト</p>\n    <p>{{roomtitle}}</p>\n    <p><button v-on:click='openItem'>close</button></p>\n  </div>\n    <FullCalendar \n      default-view=\"dayGridMonth\"\n      @eventClick=\"eventClick\"\n      :locale=\"locale\"\n      :header=\"calendarHeader\"\n      :weekends=\"calendarWeekends\"\n      :plugins=\"calendarPlugins\"\n      :events=\"calendarEvents\"\n      :selectable=\"calendarSelectable\"\n    /> \n  </div>\n</template>\n\n<script>\n  import API, {  graphqlOperation } from '@aws-amplify/api';\n  // import calendar from \"./calendar\"\n  import { listRooms } from '../graphql/queries';\n\n  import UserStore from '../mobx/UserStore'\n\n  import FullCalendar from '@fullcalendar/vue'\n  import dayGridPlugin from '@fullcalendar/daygrid'\n  import timeGridPlugin from \"@fullcalendar/timegrid\";\n  import interactionPlugin from \"@fullcalendar/interaction\";\n  import jaLocale from \"@fullcalendar/core/locales/ja\"; // 日本語化用\n\n  export default {\n    name: 'calendar',\n    components: {\n      FullCalendar // make the <FullCalendar> tag available\n    },\n    data() {\n      return {\n        userName: \"\",\n        userId: \"\",\n        members: [],\n        error: \"\",\n        rooms: [],\n        locale: jaLocale, // 日本語化\n        // カレンダーヘッダーのデザイン\n        calendarHeader: {\n          left: \"prev,next today\",\n          center: \"title\",\n          right: \"dayGridMonth,Week,Day,listWeek\"\n        },\n        calendarWeekends: true, // 土日を表示するか\n        // カレンダーで使用するプラグイン\n        calendarPlugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n        // カレンダーに表示するスケジュール一覧\n        calendarEvents: [\n          // TODO: データベースから取ってきたやつを反映できるようにする。\n        ],\n        calendarSelectable:true,\n        isModalActive: false,\n        roomtitle: \"\"\n      }\n    },\n    methods: {\n      async fetch(){\n        //部屋データを取得\n        const roomlimit = 100  // 表示する部屋の数のmax\n        const rooms = await API.graphql(graphqlOperation(listRooms,{limit:roomlimit}))\n        this.rooms = rooms.data.listRooms.items\n        // console.log(\"in fetch\")\n        // console.log(this.rooms)\n        this.addCalendarEvents(this.rooms)\n      },\n      addCalendarEvents(rooms){\n        console.log(\"add eventの中\")\n        for (const room in rooms){\n          console.log(rooms[0].id)\n          console.log(rooms[0].tilte)\n          console.log(rooms[0].createdAt)\n          this.calendarEvents.push({\n            title: rooms[room].tilte,\n            start: new Date().getTime() //rooms[room].createdAt\n            // start: rooms[room].createdAt\n          });\n        }\n      },\n      eventClick: function(event) {\n        //クリックしたイベントのタイトルが取れるよ\n        // alert('Clicked on: ' + item.title);\n        this.roomtitle = event.text\n        this.openItem()\n        console.log(event)\n        console.log(event.event.title)\n      },\n      openItem() {\n        this.toggleModal();\n      },\n      /**\n      * active状態を切り替える。\n      */\n      toggleModal() {\n        this.isModalActive = ! this.isModalActive;\n      },\n    },\n    async created(){\n      const { username,userid } = await UserStore\n      console.log(UserStore)\n      this.userName = username\n      this.userId = userid \n      this.fetch()\n      // console.log(\"fetch finished!\")\n      // console.log(\"add eventの前\")\n      this.addCalendarEvents(this.rooms)\n      // console.log(\"add eventの後\")\n    }\n  }\n</script>\n\n<style lang='scss'>\n  @import '~@fullcalendar/core/main.css';\n  @import '~@fullcalendar/daygrid/main.css';\n  .p-modal {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow-y: auto;\n  visibility: hidden;\n  opacity: 0;\n  z-index: -1;\n  &.is-open {\n    visibility: visible;\n    opacity: 1;\n    z-index: 100;\n    position:fixed;\n    top:0;\n    left:0;\n    width:100%;\n    height:100%;\n    background-color:rgba(0,0,0,0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n</style>"]}]}