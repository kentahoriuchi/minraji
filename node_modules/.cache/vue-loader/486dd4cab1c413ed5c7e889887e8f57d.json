{"remainingRequest":"/home/mech-user/Documents/utsprint/minraji/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mech-user/Documents/utsprint/minraji/src/components/chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mech-user/Documents/utsprint/minraji/src/components/chat.vue","mtime":1588996910494},{"path":"/home/mech-user/Documents/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mech-user/Documents/utsprint/minraji/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mech-user/Documents/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mech-user/Documents/utsprint/minraji/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUEksIHsgIGdyYXBocWxPcGVyYXRpb24gfSBmcm9tICdAYXdzLWFtcGxpZnkvYXBpJzsKaW1wb3J0IHsgQXV0aCB9IGZyb20gJ2F3cy1hbXBsaWZ5JwppbXBvcnQgeyBjcmVhdGVNZXNzYWdlIH0gZnJvbSAiLi9ncmFwaHFsL211dGF0aW9ucyI7CmltcG9ydCB7IGxpc3RNZXNzYWdlcyB9IGZyb20gJy4vZ3JhcGhxbC9xdWVyaWVzJzsKaW1wb3J0IHsgb25DcmVhdGVNZXNzYWdlIH0gZnJvbSAnLi9ncmFwaHFsL3N1YnNjcmlwdGlvbnMnOwp3aW5kb3cuTE9HX0xFVkVMID0gJ1ZFUkJPU0UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2NoYXQnLAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgY29udGVudDogIiIsCiAgICAgIHVzZXJOYW1lOiAiIiwKICAgICAgc3Vic2NyaXB0aW9uOiB7fSwKICAgICAgZXJyb3I6ICIiCiAgICB9CiAgfSwKICBtZXRob2RzIDp7CiAgICBzZW5kTWVzc2FnZSgpewogICAgICAvLyBUT0RPKDEpIEdyYXBoUUzjgqjjg7Pjg4njg53jgqTjg7Pjg4jjgatNdXRhdGlvbuOCkueZuuihjOOBl+OAgeODoeODg+OCu+ODvOOCuOOCkueZu+mMsuOBmeOCiwogICAgfSwKICAgIGZldGNoKCl7CiAgICAgIC8vIFRPRE8oMikgR3JhcGhRTOOCqOODs+ODieODneOCpOODs+ODiOOBq1F1ZXJ544KS55m66KGM44GX44CB44Oh44OD44K744O844K45LiA6Kan44KS5Y+W5b6X44GZ44KLCiAgICB9LAogICAgc3Vic2NyaWJlKCl7CiAgICAgIC8vIFRPRE8oMy0xKSBHcmFwaFFM44Ko44Oz44OJ44Od44Kk44Oz44OI44GrU3Vic2NyaXB0aW9u44KS55m66KGM44GX44CBbXV0YXRpb27jgpLnm6PoppbjgZnjgosKICAgIH0sCiAgICBzY3JvbGxCb3R0b20oKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoIi5tZXNzYWdlX2Jhc2UiKTsKICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxIZWlnaHQ7CiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkKCl7CiAgICB0aGlzLnVzZXJOYW1lID0gKGF3YWl0IEF1dGguY3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyKCkpLnVzZXJuYW1lOwogICAgdGhpcy5mZXRjaCgpCiAgICB0aGlzLnN1YnNjcmliZSgpCiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgLy8gVE9ETygzLTIpIOODgeODo+ODg+ODiOeUu+mdouOBi+OCiembouOCjOOCi+mam+OBq+OAgVVuU3Vic2NyaWJl44GZ44KLCiAgfSwKICB1cGRhdGVkOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNjcm9sbEJvdHRvbSgpCiAgfQp9Cg=="},{"version":3,"sources":["chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chat.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  <div class=\"title\">\n    <h2>Amplifyで作るチャットアプリ</h2>\n  </div>\n  <div class=\"main-contents\">\n    <div class=\"message_base\">\n        <div v-for=\"message in messages\" :key=\"message.id\">\n          <div v-bind:class=\"[message.username === userName ? 'message' : 'message_opponent']\">{{message.content}}</div>\n          <div v-bind:class=\"[message.username === userName ? 'username' : 'username_opponent']\">{{message.username}}</div>\n        </div>\n    </div>\n    <el-input placeholder=\"メッセージを入力(Enterで送信)\" v-model=\"content\" @keydown.enter.native=\"sendMessage\"></el-input>\n    <div class=\"error\">{{ this.error }}</div>\n  </div>\n</div>\n</template>\n\n<script>\nimport API, {  graphqlOperation } from '@aws-amplify/api';\nimport { Auth } from 'aws-amplify'\nimport { createMessage } from \"./graphql/mutations\";\nimport { listMessages } from './graphql/queries';\nimport { onCreateMessage } from './graphql/subscriptions';\nwindow.LOG_LEVEL = 'VERBOSE';\nexport default {\n  name: 'chat',\n  data(){\n    return {\n      messages: [],\n      content: \"\",\n      userName: \"\",\n      subscription: {},\n      error: \"\"\n    }\n  },\n  methods :{\n    sendMessage(){\n      // TODO(1) GraphQLエンドポイントにMutationを発行し、メッセージを登録する\n    },\n    fetch(){\n      // TODO(2) GraphQLエンドポイントにQueryを発行し、メッセージ一覧を取得する\n    },\n    subscribe(){\n      // TODO(3-1) GraphQLエンドポイントにSubscriptionを発行し、mutationを監視する\n    },\n    scrollBottom() {\n      const container = this.$el.querySelector(\".message_base\");\n      container.scrollTop = container.scrollHeight;\n    }\n  },\n  async created(){\n    this.userName = (await Auth.currentAuthenticatedUser()).username;\n    this.fetch()\n    this.subscribe()\n  },\n  beforeDestroy() {\n    // TODO(3-2) チャット画面から離れる際に、UnSubscribeする\n  },\n  updated: function () {\n    this.scrollBottom()\n  }\n}\n</script>\n\n"]}]}