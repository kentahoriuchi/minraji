{"remainingRequest":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vagrant/workspace/minraji/utsprint/minraji/src/components/cal_page.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/src/components/cal_page.vue","mtime":1590147193000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":1588818758000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/babel-loader/lib/index.js","mtime":1588818754000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":1588818758000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/vue-loader/lib/index.js","mtime":1588818841000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUEksIHsgIGdyYXBocWxPcGVyYXRpb24gfSBmcm9tICdAYXdzLWFtcGxpZnkvYXBpJzsKaW1wb3J0IHsgQXV0aCB9IGZyb20gJ2F3cy1hbXBsaWZ5JwppbXBvcnQgeyBjcmVhdGVVc2VyIH0gZnJvbSAiLi4vZ3JhcGhxbC9tdXRhdGlvbnMiOwppbXBvcnQgeyB1cGRhdGVVc2VyIH0gZnJvbSAiLi4vZ3JhcGhxbC9tdXRhdGlvbnMiOwppbXBvcnQgeyBsaXN0Um9vbXMgfSBmcm9tICcuLi9ncmFwaHFsL3F1ZXJpZXMnOwppbXBvcnQgeyBnZXRSb29tIH0gZnJvbSAnLi4vZ3JhcGhxbC9xdWVyaWVzJzsKaW1wb3J0IHsgbGlzdFVzZXJzIH0gZnJvbSAnLi4vZ3JhcGhxbC9xdWVyaWVzJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXIvcm91dGVyJwppbXBvcnQgY2FsZW5kYXIgZnJvbSAiLi9jYWxlbmRhciIKCndpbmRvdy5MT0dfTEVWRUwgPSAnVkVSQk9TRSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY2hhdCcsCiAgY29tcG9uZW50czogewogICAgY2FsZW5kYXIKICB9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIHVzZXJOYW1lOiAiIiwKICAgICAgbWVtYmVyczogW10sCiAgICAgIC8vIHN1YnNjcmlwdGlvbjoge30sCiAgICAgIGVycm9yOiAiIiwKICAgICAgcm9vbXM6IFtdLAogICAgICByb29tX2lkOiAiIgogICAgfQogIH0sCiAgbWV0aG9kcyA6ewogICAgYXN5bmMgZmV0Y2goKXsKICAgICAgY29uc3Qgcm9vbV90ZW1wID0gYXdhaXQgQVBJLmdyYXBocWwoZ3JhcGhxbE9wZXJhdGlvbihsaXN0Um9vbXMse2xpbWl0OjEwfSkpCiAgICAgIHRoaXMucm9vbXMgPSByb29tX3RlbXAuZGF0YS5saXN0Um9vbXMuaXRlbXMKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucm9vbXMubGVuZ3RoOyBpKyspewogICAgICAgIGxldCBtZW1iZXIgPSBhd2FpdCBBUEkuZ3JhcGhxbChncmFwaHFsT3BlcmF0aW9uKGdldFJvb20se2lkOiB0aGlzLnJvb21zW2ldLmlkfSkpCiAgICAgICAgdGhpcy5tZW1iZXJzLnB1c2gobWVtYmVyLmdldFJvb20udXNlcnMuaXRlbXMubGVuZ3RoKQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucm9vbXMpCiAgICB9LAogICAgYXN5bmMgZ290b3Jvb20odGVtcCl7CiAgICAgIC8v44Om44O844K244O844Gu6KqN6Ki844Go44GL44KS44KE44KLCiAgICAgIGNvbnN0IHJvb21pZCA9IGF3YWl0IEFQSS5ncmFwaHFsKGdyYXBocWxPcGVyYXRpb24obGlzdFVzZXJzLCB7IGZpbHRlcjogeyd1c2VybmFtZSc6e2VxOiB0aGlzLnVzZXJOYW1lfX19KSkKICAgICAgY29uc3QgdXNlcnJvb20gPSByb29taWQuZGF0YS5saXN0VXNlcnMuaXRlbXNbMF0KICAgICAgY29uc29sZS5sb2codXNlcnJvb20pCiAgICAgIC8vIGlmICghdXNlcnJvb20ucm9vbWlkKXsKICAgICAgY29uc29sZS5sb2coZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJvb20iKS50ZXh0Q29udGVudCkKICAgICAgdmFyIHJvb21fYSA9IGF3YWl0IEFQSS5ncmFwaHFsKGdyYXBocWxPcGVyYXRpb24oZ2V0Um9vbSx7aWQ6IHRlbXB9KSkKICAgICAgY29uc29sZS5sb2cocm9vbV9hLmRhdGEuZ2V0Um9vbS51c2Vycy5pdGVtcykKICAgICAgdGhpcy5tZW1iZXJzID0gcm9vbV9hLmRhdGEuZ2V0Um9vbS51c2Vycy5pdGVtcwogICAgICB2YXIgcm9vbSA9IHJvb21fYS5kYXRhLmdldFJvb20udXNlcnMKICAgICAgY29uc3QgdXNlcnJvb21pZCA9IHsKICAgICAgICBpZDogdXNlcnJvb20uaWQsCiAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlck5hbWUsCiAgICAgICAgdXNlclJvb21pZElkOiByb29tLmlkCiAgICAgIH0KICAgICAgY29uc29sZS5sb2codXNlcnJvb21pZCkKICAgICAgYXdhaXQgQVBJLmdyYXBocWwoZ3JhcGhxbE9wZXJhdGlvbih1cGRhdGVVc2VyLCB7IGlucHV0OiB1c2Vycm9vbWlkIH0pKQogICAgICAgIC5jYXRjaChlcnJvciA9PiB0aGlzLmVycm9yID0gSlNPTi5zdHJpbmdpZnkoZXJyb3IpKQogICAgICAvLyB9CiAgICAgIC8vIGVsc2V7CiAgICAgIC8vICAgY29uc29sZS5sb2coJ2FscmVhZHkgcm9vbSBpbicpCiAgICAgIC8vIH0KICAgICAgcm91dGVyLnB1c2goJy9yb29tL2luJykKICAgIH0KICB9LAogIGFzeW5jIGNyZWF0ZWQoKXsKICAgIHRoaXMudXNlck5hbWUgPSAoYXdhaXQgQXV0aC5jdXJyZW50QXV0aGVudGljYXRlZFVzZXIoKSkudXNlcm5hbWU7CiAgICB2YXIgdXNlciA9IGF3YWl0IEFQSS5ncmFwaHFsKGdyYXBocWxPcGVyYXRpb24obGlzdFVzZXJzLCB7IGZpbHRlcjogeyd1c2VybmFtZSc6e2VxOiB0aGlzLnVzZXJOYW1lfX19KSkKICAgIGNvbnNvbGUubG9nKHVzZXIuZGF0YS5saXN0VXNlcnMuaXRlbXMubGVuZ3RoKQogICAgY29uc29sZS5sb2coIXVzZXIuZGF0YS5saXN0VXNlcnMuaXRlbXMubGVuZ3RoKQogICAgaWYgKCF1c2VyLmRhdGEubGlzdFVzZXJzLml0ZW1zLmxlbmd0aCl7CiAgICAgIGNvbnN0IG5ld3VzZXIgPSB7CiAgICAgICAgaWQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgdGhpcy51c2VyTmFtZSwKICAgICAgICB1c2VybmFtZTogdGhpcy51c2VyTmFtZQogICAgICB9CiAgICAgIEFQSS5ncmFwaHFsKGdyYXBocWxPcGVyYXRpb24oY3JlYXRlVXNlciwgeyBpbnB1dDogbmV3dXNlciB9KSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gdGhpcy5lcnJvciA9IEpTT04uc3RyaW5naWZ5KGVycm9yKSkKICAgICAgY29uc29sZS5sb2cobmV3dXNlcikKICAgIH0KICAgIHRoaXMuZmV0Y2goKQogIH0KfQo="},{"version":3,"sources":["cal_page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cal_page.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<!-- 待機部屋の画面、部屋が作られると一覧が表示される -->\n<div>\n<header>\n<h1 class=\"headline\">\n  <a>みんラジ!</a>\n</h1>\n <ul class=\"nav-list\">\n      <li class=\"nav-list-item\"><router-link to=\"/\" id=\"back-home-button\"> ホーム</router-link></li>\n      <li class=\"nav-list-item\"><router-link to=\"/room\" id=\"back-room-button-header\">ルーム広場に行く</router-link></li>\n      <li class=\"nav-list-item\"> <amplify-sign-out></amplify-sign-out></li>\n  </ul>\t\n  <!--<router-link\n    :to=\"{\n      name: '/', \n      hash: '#hashtag'\n      }\"\n  >ルームを作成する</router-link>-->\n</header>\n<main>\n  <section>\n    \n   \n    \n    <section>\n      <calendar></calendar>\n    </section>\n      \n    \n  </section>\n</main>\n\n</div>\n</template>\n\n\n<script>\nimport API, {  graphqlOperation } from '@aws-amplify/api';\nimport { Auth } from 'aws-amplify'\nimport { createUser } from \"../graphql/mutations\";\nimport { updateUser } from \"../graphql/mutations\";\nimport { listRooms } from '../graphql/queries';\nimport { getRoom } from '../graphql/queries';\nimport { listUsers } from '../graphql/queries';\nimport router from '../router/router'\nimport calendar from \"./calendar\"\n\nwindow.LOG_LEVEL = 'VERBOSE';\nexport default {\n  name: 'chat',\n  components: {\n    calendar\n  },\n  data(){\n    return {\n      userName: \"\",\n      members: [],\n      // subscription: {},\n      error: \"\",\n      rooms: [],\n      room_id: \"\"\n    }\n  },\n  methods :{\n    async fetch(){\n      const room_temp = await API.graphql(graphqlOperation(listRooms,{limit:10}))\n      this.rooms = room_temp.data.listRooms.items\n      for(let i = 0; i < this.rooms.length; i++){\n        let member = await API.graphql(graphqlOperation(getRoom,{id: this.rooms[i].id}))\n        this.members.push(member.getRoom.users.items.length)\n      }\n      console.log(this.rooms)\n    },\n    async gotoroom(temp){\n      //ユーザーの認証とかをやる\n      const roomid = await API.graphql(graphqlOperation(listUsers, { filter: {'username':{eq: this.userName}}}))\n      const userroom = roomid.data.listUsers.items[0]\n      console.log(userroom)\n      // if (!userroom.roomid){\n      console.log(document.getElementById(\"room\").textContent)\n      var room_a = await API.graphql(graphqlOperation(getRoom,{id: temp}))\n      console.log(room_a.data.getRoom.users.items)\n      this.members = room_a.data.getRoom.users.items\n      var room = room_a.data.getRoom.users\n      const userroomid = {\n        id: userroom.id,\n        username: this.userName,\n        userRoomidId: room.id\n      }\n      console.log(userroomid)\n      await API.graphql(graphqlOperation(updateUser, { input: userroomid }))\n        .catch(error => this.error = JSON.stringify(error))\n      // }\n      // else{\n      //   console.log('already room in')\n      // }\n      router.push('/room/in')\n    }\n  },\n  async created(){\n    this.userName = (await Auth.currentAuthenticatedUser()).username;\n    var user = await API.graphql(graphqlOperation(listUsers, { filter: {'username':{eq: this.userName}}}))\n    console.log(user.data.listUsers.items.length)\n    console.log(!user.data.listUsers.items.length)\n    if (!user.data.listUsers.items.length){\n      const newuser = {\n        id: new Date().getTime() + this.userName,\n        username: this.userName\n      }\n      API.graphql(graphqlOperation(createUser, { input: newuser }))\n        .catch(error => this.error = JSON.stringify(error))\n      console.log(newuser)\n    }\n    this.fetch()\n  }\n}\n</script>\n\n<style>\n\n#back-home-button {\n  font-size: 1.4em;\n  position: relative;\n  display: inline-block;\n  padding: 0.25em 0.5em;\n  text-decoration: none;\n  color: #FFF;\n  background: #4235fd;/*背景色*/\n  border-bottom: solid 2px #d27d00;/*少し濃い目の色に*/\n  border-radius: 4px;/*角の丸み*/\n  box-shadow: inset 0 2px 0 rgba(255,255,255,0.2), 0 2px 2px rgba(0, 0, 0, 0.19);\n  font-weight: bold;\n}\n  \n#back-home-button:active {\n  border-bottom: solid 2px #fd9535;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.30);\n}\n\n#back-room-button {\n  font-size: 1.4em;\n  position: relative;\n  left: 600px;\n  display: inline-block;\n  padding: 0.25em 0.5em;\n  text-decoration: none;\n  color: #FFF;\n  background: #fd9535;/*背景色*/\n  border-bottom: solid 2px #d27d00;/*少し濃い目の色に*/\n  border-radius: 4px;/*角の丸み*/\n  box-shadow: inset 0 2px 0 rgba(255,255,255,0.2), 0 2px 2px rgba(0, 0, 0, 0.19);\n  font-weight: bold;\n}\n\n#back-room-button:active {\n  border-bottom: solid 2px #fd9535;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.30);\n}\n</style>\n"]}]}