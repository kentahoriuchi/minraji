{"remainingRequest":"/home/mech-user/Documents/minraji/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mech-user/Documents/minraji/src/components/calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mech-user/Documents/minraji/src/components/calendar.vue","mtime":1590498028927},{"path":"/home/mech-user/Documents/minraji/node_modules/babel-loader/lib/index.js","mtime":1590498027871},{"path":"/home/mech-user/Documents/minraji/node_modules/cache-loader/dist/cjs.js","mtime":1590498027979},{"path":"/home/mech-user/Documents/minraji/node_modules/vue-loader/lib/index.js","mtime":1590498028819}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUEksIHsgIGdyYXBocWxPcGVyYXRpb24gfSBmcm9tICdAYXdzLWFtcGxpZnkvYXBpJzsKLy8gaW1wb3J0IGNhbGVuZGFyIGZyb20gIi4vY2FsZW5kYXIiCmltcG9ydCB7IGxpc3RSb29tcyB9IGZyb20gJy4uL2dyYXBocWwvcXVlcmllcyc7CgppbXBvcnQgVXNlclN0b3JlIGZyb20gJy4uL21vYngvVXNlclN0b3JlJwoKaW1wb3J0IEZ1bGxDYWxlbmRhciBmcm9tICdAZnVsbGNhbGVuZGFyL3Z1ZScKaW1wb3J0IGRheUdyaWRQbHVnaW4gZnJvbSAnQGZ1bGxjYWxlbmRhci9kYXlncmlkJwppbXBvcnQgdGltZUdyaWRQbHVnaW4gZnJvbSAiQGZ1bGxjYWxlbmRhci90aW1lZ3JpZCI7CmltcG9ydCBpbnRlcmFjdGlvblBsdWdpbiBmcm9tICJAZnVsbGNhbGVuZGFyL2ludGVyYWN0aW9uIjsKaW1wb3J0IGphTG9jYWxlIGZyb20gIkBmdWxsY2FsZW5kYXIvY29yZS9sb2NhbGVzL2phIjsgLy8g5pel5pys6Kqe5YyW55SoCgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjYWxlbmRhcicsCiAgY29tcG9uZW50czogewogICAgRnVsbENhbGVuZGFyIC8vIG1ha2UgdGhlIDxGdWxsQ2FsZW5kYXI+IHRhZyBhdmFpbGFibGUKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyTmFtZTogIiIsCiAgICAgIHVzZXJJZDogIiIsCiAgICAgIG1lbWJlcnM6IFtdLAogICAgICBlcnJvcjogIiIsCiAgICAgIHJvb21zOiBbXSwKICAgICAgbG9jYWxlOiBqYUxvY2FsZSwgLy8g5pel5pys6Kqe5YyWCiAgICAgIC8vIOOCq+ODrOODs+ODgOODvOODmOODg+ODgOODvOOBruODh+OCtuOCpOODswogICAgICBjYWxlbmRhckhlYWRlcjogewogICAgICAgIGxlZnQ6ICJwcmV2LG5leHQgdG9kYXkiLAogICAgICAgIGNlbnRlcjogInRpdGxlIiwKICAgICAgICByaWdodDogImRheUdyaWRNb250aCxXZWVrLERheSxsaXN0V2VlayIKICAgICAgfSwKICAgICAgY2FsZW5kYXJXZWVrZW5kczogdHJ1ZSwgLy8g5Zyf5pel44KS6KGo56S644GZ44KL44GLCiAgICAgIC8vIOOCq+ODrOODs+ODgOODvOOBp+S9v+eUqOOBmeOCi+ODl+ODqeOCsOOCpOODswogICAgICBjYWxlbmRhclBsdWdpbnM6IFtkYXlHcmlkUGx1Z2luLCB0aW1lR3JpZFBsdWdpbiwgaW50ZXJhY3Rpb25QbHVnaW5dLAogICAgICAvLyDjgqvjg6zjg7Pjg4Djg7zjgavooajnpLrjgZnjgovjgrnjgrHjgrjjg6Xjg7zjg6vkuIDopqcKICAgICAgY2FsZW5kYXJFdmVudHM6IFsKICAgICAgICAvLyBUT0RPOiDjg4fjg7zjgr/jg5njg7zjgrnjgYvjgonlj5bjgaPjgabjgY3jgZ/jgoTjgaTjgpLlj43mmKDjgafjgY3jgovjgojjgYbjgavjgZnjgovjgIIKICAgICAgXSwKICAgICAgY2FsZW5kYXJTZWxlY3RhYmxlOnRydWUsCiAgICAgIGlzTW9kYWxBY3RpdmU6IGZhbHNlLAogICAgICByb29tdGl0bGU6ICIiCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBmZXRjaCgpewogICAgICAvL+mDqOWxi+ODh+ODvOOCv+OCkuWPluW+lwogICAgICBjb25zdCByb29tbGltaXQgPSAxMDAgIC8vIOihqOekuuOBmeOCi+mDqOWxi+OBruaVsOOBrm1heAogICAgICBjb25zdCByb29tcyA9IGF3YWl0IEFQSS5ncmFwaHFsKGdyYXBocWxPcGVyYXRpb24obGlzdFJvb21zLHtsaW1pdDpyb29tbGltaXR9KSkKICAgICAgdGhpcy5yb29tcyA9IHJvb21zLmRhdGEubGlzdFJvb21zLml0ZW1zCiAgICAgIC8vIGNvbnNvbGUubG9nKCJpbiBmZXRjaCIpCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucm9vbXMpCiAgICAgIHRoaXMuYWRkQ2FsZW5kYXJFdmVudHModGhpcy5yb29tcykKICAgIH0sCiAgICBhZGRDYWxlbmRhckV2ZW50cyhyb29tcyl7CiAgICAgIGNvbnNvbGUubG9nKCJhZGQgZXZlbnTjga7kuK0iKQogICAgICBmb3IgKGNvbnN0IHJvb20gaW4gcm9vbXMpewogICAgICAgIGNvbnNvbGUubG9nKHJvb21zWzBdLmlkKQogICAgICAgIGNvbnNvbGUubG9nKHJvb21zWzBdLnRpbHRlKQogICAgICAgIGNvbnNvbGUubG9nKHJvb21zWzBdLmNyZWF0ZWRBdCkKICAgICAgICB0aGlzLmNhbGVuZGFyRXZlbnRzLnB1c2goewogICAgICAgICAgdGl0bGU6IHJvb21zW3Jvb21dLnRpbHRlLAogICAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8vcm9vbXNbcm9vbV0uY3JlYXRlZEF0CiAgICAgICAgICAvLyBzdGFydDogcm9vbXNbcm9vbV0uY3JlYXRlZEF0CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBldmVudENsaWNrOiBmdW5jdGlvbihldmVudCkgewogICAgICAvL+OCr+ODquODg+OCr+OBl+OBn+OCpOODmeODs+ODiOOBruOCv+OCpOODiOODq+OBjOWPluOCjOOCi+OCiAogICAgICAvLyBhbGVydCgnQ2xpY2tlZCBvbjogJyArIGl0ZW0udGl0bGUpOwogICAgICB0aGlzLnJvb210aXRsZSA9IGV2ZW50LnRleHQKICAgICAgdGhpcy5vcGVuSXRlbSgpCiAgICAgIGNvbnNvbGUubG9nKGV2ZW50KQogICAgICBjb25zb2xlLmxvZyhldmVudC5ldmVudC50aXRsZSkKICAgIH0sCiAgICBvcGVuSXRlbSgpIHsKICAgICAgdGhpcy50b2dnbGVNb2RhbCgpOwogICAgfSwKICAgIC8qKgogICAgKiBhY3RpdmXnirbmhYvjgpLliIfjgormm7/jgYjjgovjgIIKICAgICovCiAgICB0b2dnbGVNb2RhbCgpIHsKICAgICAgdGhpcy5pc01vZGFsQWN0aXZlID0gISB0aGlzLmlzTW9kYWxBY3RpdmU7CiAgICB9LAogIH0sCiAgYXN5bmMgY3JlYXRlZCgpewogICAgY29uc3QgeyB1c2VybmFtZSx1c2VyaWQgfSA9IGF3YWl0IFVzZXJTdG9yZQogICAgY29uc29sZS5sb2coVXNlclN0b3JlKQogICAgdGhpcy51c2VyTmFtZSA9IHVzZXJuYW1lCiAgICB0aGlzLnVzZXJJZCA9IHVzZXJpZCAKICAgIHRoaXMuZmV0Y2goKQogICAgLy8gY29uc29sZS5sb2coImZldGNoIGZpbmlzaGVkISIpCiAgICAvLyBjb25zb2xlLmxvZygiYWRkIGV2ZW5044Gu5YmNIikKICAgIHRoaXMuYWRkQ2FsZW5kYXJFdmVudHModGhpcy5yb29tcykKICAgIC8vIGNvbnNvbGUubG9nKCJhZGQgZXZlbnTjga7lvowiKQogIH0KfQoKCg=="},{"version":3,"sources":["calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"calendar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  \n    \n  <main>\n  \n\n  <div id = \"calendar-parameter\">\n    <FullCalendar \n      default-view=\"dayGridMonth\"\n      @eventClick=\"eventClick\"\n      :locale=\"locale\"\n      :header=\"calendarHeader\"\n      :weekends=\"calendarWeekends\"\n      :plugins=\"calendarPlugins\"\n      :events=\"calendarEvents\"\n      :selectable=\"calendarSelectable\"\n      \n    />\n  </div>\n\n  <div class=\"p-modal\" :class=\"{'is-open': isModalActive}\">\n    <p>ポップアップテスト</p>\n    <p>{{roomtitle}}</p>\n    <p><button v-on:click='openItem'>close</button></p>\n  </div>\n  <table>\n    <td><router-link to=\"/\"><button id=\"back-home-button\">ホーム</button></router-link></td>\n    <td><router-link to=\"/room\"><button id=\"go-room-button\">ルーム広場に戻る</button></router-link></td>\n    <td><amplify-sign-out></amplify-sign-out></td>\n\n  </table>\n  </main>\n</div>\n</template>\n\n<script>\n  import API, {  graphqlOperation } from '@aws-amplify/api';\n  // import calendar from \"./calendar\"\n  import { listRooms } from '../graphql/queries';\n\n  import UserStore from '../mobx/UserStore'\n\n  import FullCalendar from '@fullcalendar/vue'\n  import dayGridPlugin from '@fullcalendar/daygrid'\n  import timeGridPlugin from \"@fullcalendar/timegrid\";\n  import interactionPlugin from \"@fullcalendar/interaction\";\n  import jaLocale from \"@fullcalendar/core/locales/ja\"; // 日本語化用\n  \n\n  export default {\n    name: 'calendar',\n    components: {\n      FullCalendar // make the <FullCalendar> tag available\n    },\n    data() {\n      return {\n        userName: \"\",\n        userId: \"\",\n        members: [],\n        error: \"\",\n        rooms: [],\n        locale: jaLocale, // 日本語化\n        // カレンダーヘッダーのデザイン\n        calendarHeader: {\n          left: \"prev,next today\",\n          center: \"title\",\n          right: \"dayGridMonth,Week,Day,listWeek\"\n        },\n        calendarWeekends: true, // 土日を表示するか\n        // カレンダーで使用するプラグイン\n        calendarPlugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n        // カレンダーに表示するスケジュール一覧\n        calendarEvents: [\n          // TODO: データベースから取ってきたやつを反映できるようにする。\n        ],\n        calendarSelectable:true,\n        isModalActive: false,\n        roomtitle: \"\"\n      }\n    },\n    methods: {\n      async fetch(){\n        //部屋データを取得\n        const roomlimit = 100  // 表示する部屋の数のmax\n        const rooms = await API.graphql(graphqlOperation(listRooms,{limit:roomlimit}))\n        this.rooms = rooms.data.listRooms.items\n        // console.log(\"in fetch\")\n        // console.log(this.rooms)\n        this.addCalendarEvents(this.rooms)\n      },\n      addCalendarEvents(rooms){\n        console.log(\"add eventの中\")\n        for (const room in rooms){\n          console.log(rooms[0].id)\n          console.log(rooms[0].tilte)\n          console.log(rooms[0].createdAt)\n          this.calendarEvents.push({\n            title: rooms[room].tilte,\n            start: new Date().getTime() //rooms[room].createdAt\n            // start: rooms[room].createdAt\n          });\n        }\n      },\n      eventClick: function(event) {\n        //クリックしたイベントのタイトルが取れるよ\n        // alert('Clicked on: ' + item.title);\n        this.roomtitle = event.text\n        this.openItem()\n        console.log(event)\n        console.log(event.event.title)\n      },\n      openItem() {\n        this.toggleModal();\n      },\n      /**\n      * active状態を切り替える。\n      */\n      toggleModal() {\n        this.isModalActive = ! this.isModalActive;\n      },\n    },\n    async created(){\n      const { username,userid } = await UserStore\n      console.log(UserStore)\n      this.userName = username\n      this.userId = userid \n      this.fetch()\n      // console.log(\"fetch finished!\")\n      // console.log(\"add eventの前\")\n      this.addCalendarEvents(this.rooms)\n      // console.log(\"add eventの後\")\n    }\n  }\n\n\n</script>\n\n<style lang='scss'>\n  @import '~@fullcalendar/core/main.css';\n  @import '~@fullcalendar/daygrid/main.css';\n  .p-modal {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow-y: auto;\n  visibility: hidden;\n  opacity: 0;\n  z-index: -1;\n  &.is-open {\n    visibility: visible;\n    opacity: 1;\n    z-index: 100;\n    position:fixed;\n    top:0;\n    left:0;\n    width:100%;\n    height:100%;\n    background-color:rgba(0,0,0,0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n\n#calendar-parameter{\n  width:100%;\n \n}\n</style>"]}]}