(function(e){function t(t){for(var r,o,i=t[0],u=t[1],c=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},1253:function(e,t,n){"use strict";var r=n("6e3e"),a=n.n(r);a.a},"199c":function(e,t){},"23be":function(e,t,n){"use strict";var r=n("199c"),a=n.n(r);t["default"]=a.a},"3dfd":function(e,t,n){"use strict";var r=n("99a6"),a=n("23be"),s=(n("034f"),n("2877")),o=Object(s["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=o.exports},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("3dfd"),s=(n("45fc"),n("96cf"),n("1da1")),o=n("8c4f"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"page"}},[n("header",[e._m(0),e.signedIn?n("div",[n("ul",{staticClass:"nav-list"},[e._m(1),e._m(2),n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/use"}},[n("button",{attrs:{id:"go-how-to-use-button"}},[e._v("How to use")])])],1),n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/room"}},[n("button",{attrs:{id:"go-room-button"}},[e._v("ルーム広場に行く")])])],1),e._m(3),n("li",{staticClass:"nav-list-item"},[n("amplify-sign-out")],1)])]):e._e(),e.signedIn?e._e():n("div",[n("ul",{staticClass:"nav-list"},[e._m(4),e._m(5),n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/use"}},[n("button",{attrs:{id:"go-how-to-use-button"}},[e._v("How to use")])])],1),n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/login"}},[n("button",{attrs:{id:"login-button"}},[e._v("ログイン")])])],1)])])]),e._m(6)])},u=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"headline"},[n("a",[e._v("みんラジ!")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"nav-list-item"},[n("a",{attrs:{href:"#link2about"}},[e._v("About")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"nav-list-item"},[n("a",{attrs:{href:"#link2service"}},[e._v("Service")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"nav-list-item"},[n("input",{attrs:{type:"button",name:"buttonName",id:"question-button",value:"アンケート",onClick:"window.open('https://docs.google.com/forms/d/e/1FAIpQLSeeWIQ5NyHNrhWfj9K_ZJS8sZ_wD0ZJTYCOpQr1qm9KkUDLBQ/viewform?usp=sf_link','_blank')"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"nav-list-item"},[n("a",{attrs:{href:"#link2about"}},[e._v("About")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"nav-list-item"},[n("a",{attrs:{href:"#link2service"}},[e._v("Service")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("section",[n("section",[n("a",{attrs:{name:"link2about",id:"home_link2about"}},[n("h2",[e._v("About")])]),n("p",[e._v("このサイトは東京大学で行われている"),n("a",{attrs:{href:"https://sites.google.com/g.ecc.u-tokyo.ac.jp/utokyo-project-sprint/",target:"_blank"}},[e._v("Utokyo Project Sprint")]),e._v("に参加しているサービスです。 新型コロナウイルスによって生じた困難をネットサービスで解決または改善を目的としているプロジェクトです。 詳しいことは上記にあるサイトに書いてあるので参照してください。")])]),n("section",[n("a",{attrs:{name:"link2service"}},[n("h2",[e._v("Service")])]),n("p",[e._v("新型コロナウイルスの影響で、在宅勤務や休校などで多くの人が現在外出自粛を余儀無くされています。 この自粛期間で運動不足になっている人は多くいると思います。例えば、学生なら部活動やサークルに行くことができない、社会人ならスポーツジムに行くことができない、 プロスポーツ選手でさえ練習することができません。コロナ太りと検索すると記事がたくさん出てくるように多くの人が運動不足になっています。 肥満体になると、健康でなくなる、服のサイズが合わなくなるなど日常生活で様々な障害が発生します。 多くの人が運動不足を解消したいと思っているはずです。 また、これから夏に入ると暑くなり、肌の露出が多い服を着る機会が増えると思いますが、体がたるんでいては格好悪いでしょう。 しかし、新型コロナウイルスの感染が怖く、外に出て運動することは中々できないと思います。そこで、私たちは新型コロナウイルスの感染防止を考慮して在宅で運動不足を解消するために、自宅で誰でも気軽に運動できるサービスを開発しようと考えました。")]),n("p",[e._v("自宅でできる運動は筋トレなどさまざまあると思いますが、 私たちはラジオ体操に焦点を当てました。 多くの人は、学校の体育の授業で友達とラジオ体操を一緒にやった、または町内会で行われている朝の体操で町の人とラジオ体操を一緒にやった経験があると思います。 老若男女の誰もが知っているかつ気軽にできるラジオ体操だからこそ、在宅で行うハードルは低いと思います。 ")]),e._v(" 家の中でラジオ体操や筋トレをやろうと意気込んでも、三日坊主になり長続きするのは難しいです。これは1人でやっているため、他人の目や強制力がないことが原因だと言えます。 他人と一緒にやれば、あの子が続けているから私も頑張って続けようと思えるはずです。 誰かと一緒に時間を共有することが長続きの秘訣だと言えます。 私たちは、同じ動画を共有することで擬似的に他人と一緒に何かをしている感覚が生み出せるのではないかと考えました。"),n("br"),n("p",[e._v("新型コロナウイルスの感染防止のために在宅、肥満解消のために運動をしたい、持続するために他人と時間を共有したいという課題を解決するために、 私たちはweb上で他人とラジオ体操動画を共有して一緒に在宅でラジオ体操をするサービスを開発しました。 ")]),n("p",[e._v(" サービスをお使い頂いたら、サービスの品質向上のためにアンケートにご協力ください。 ")]),n("p",[n("input",{attrs:{type:"button",name:"buttonName",id:"question-button",value:"アンケート",onClick:"window.open('https://docs.google.com/forms/d/e/1FAIpQLSeeWIQ5NyHNrhWfj9K_ZJS8sZ_wD0ZJTYCOpQr1qm9KkUDLBQ/viewform?usp=sf_link','_blank')"}})])])])])}],c=n("bf82"),l=n("19b2"),m=n("1b29"),d=n("6b0a"),p="\n  query ListMessages(\n    $filter: ModelMessageFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listMessages(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        username\n        content\n        roomid {\n          id\n          movie\n          tilte\n          numberofmember\n          privatepassword\n          time\n          reservedtime\n        }\n      }\n      nextToken\n    }\n  }\n",v="\n  query GetUser($id: ID!) {\n    getUser(id: $id) {\n      id\n      username\n      roomid {\n        id\n        movie\n        tilte\n        numberofmember\n        privatepassword\n        users {\n          nextToken\n        }\n        time\n        reservedtime\n        messages {\n          nextToken\n        }\n      }\n    }\n  }\n",h="\n  query ListUsers(\n    $filter: ModelUserFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listUsers(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        username\n        roomid {\n          id\n          movie\n          tilte\n          numberofmember\n          privatepassword\n          time\n          reservedtime\n        }\n      }\n      nextToken\n    }\n  }\n",f="\n  query GetRoom($id: ID!) {\n    getRoom(id: $id) {\n      id\n      movie\n      tilte\n      numberofmember\n      privatepassword\n      users {\n        items {\n          id\n          username\n        }\n        nextToken\n      }\n      time\n      reservedtime\n      messages {\n        items {\n          id\n          username\n          content\n        }\n        nextToken\n      }\n    }\n  }\n",g="\n  query ListRooms(\n    $filter: ModelRoomFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listRooms(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        movie\n        tilte\n        numberofmember\n        privatepassword\n        users {\n          nextToken\n        }\n        time\n        reservedtime\n        messages {\n          nextToken\n        }\n      }\n      nextToken\n    }\n  }\n",b="\n  mutation CreateMessage(\n    $input: CreateMessageInput!\n    $condition: ModelMessageConditionInput\n  ) {\n    createMessage(input: $input, condition: $condition) {\n      id\n      username\n      content\n      roomid {\n        id\n        movie\n        tilte\n        numberofmember\n        privatepassword\n        users {\n          nextToken\n        }\n        time\n        reservedtime\n        messages {\n          nextToken\n        }\n      }\n    }\n  }\n",_="\n  mutation CreateUser(\n    $input: CreateUserInput!\n    $condition: ModelUserConditionInput\n  ) {\n    createUser(input: $input, condition: $condition) {\n      id\n      username\n      roomid {\n        id\n        movie\n        tilte\n        numberofmember\n        privatepassword\n        users {\n          nextToken\n        }\n        time\n        reservedtime\n        messages {\n          nextToken\n        }\n      }\n    }\n  }\n",w="\n  mutation UpdateUser(\n    $input: UpdateUserInput!\n    $condition: ModelUserConditionInput\n  ) {\n    updateUser(input: $input, condition: $condition) {\n      id\n      username\n      roomid {\n        id\n        movie\n        tilte\n        numberofmember\n        privatepassword\n        users {\n          nextToken\n        }\n        time\n        reservedtime\n        messages {\n          nextToken\n        }\n      }\n    }\n  }\n",y="\n  mutation CreateRoom(\n    $input: CreateRoomInput!\n    $condition: ModelRoomConditionInput\n  ) {\n    createRoom(input: $input, condition: $condition) {\n      id\n      movie\n      tilte\n      numberofmember\n      privatepassword\n      users {\n        items {\n          id\n          username\n        }\n        nextToken\n      }\n      time\n      reservedtime\n      messages {\n        items {\n          id\n          username\n          content\n        }\n        nextToken\n      }\n    }\n  }\n",k="\n  mutation UpdateRoom(\n    $input: UpdateRoomInput!\n    $condition: ModelRoomConditionInput\n  ) {\n    updateRoom(input: $input, condition: $condition) {\n      id\n      movie\n      tilte\n      numberofmember\n      privatepassword\n      users {\n        items {\n          id\n          username\n        }\n        nextToken\n      }\n      time\n      reservedtime\n      messages {\n        items {\n          id\n          username\n          content\n        }\n        nextToken\n      }\n    }\n  }\n",x="\n  mutation DeleteRoom(\n    $input: DeleteRoomInput!\n    $condition: ModelRoomConditionInput\n  ) {\n    deleteRoom(input: $input, condition: $condition) {\n      id\n      movie\n      tilte\n      numberofmember\n      privatepassword\n      users {\n        items {\n          id\n          username\n        }\n        nextToken\n      }\n      time\n      reservedtime\n      messages {\n        items {\n          id\n          username\n          content\n        }\n        nextToken\n      }\n    }\n  }\n";window.LOG_LEVEL="VERBOSE";var O={name:"home",data:function(){return{signedIn:!1,userName:"",userid:""}},methods:{checkIfUserExists:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,m["a"].graphql(Object(d["b"])(h,{filter:{username:{eq:e}}}));case 2:r=n.sent,console.log(r.data.listUsers.items),r.data.listUsers.items.length||t.createUser();case 5:case"end":return n.stop()}}),n)})))()},createUser:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={id:(new Date).getTime()+e.userName,username:e.userName},t.next=4,m["a"].graphql(Object(d["b"])(_,{input:n}));case 4:e.user.id=n.id,console.log("newuser:",n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("error creating user data... ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},beforeCreate:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].currentAuthenticatedUser();case 3:n=t.sent,e.signedIn=!0,e.userName=n.username,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.signedIn=!1;case 11:l["AmplifyEventBus"].$on("authState",function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("signedIn"!==n){t.next=9;break}return t.next=3,c["a"].currentAuthenticatedUser();case 3:r=t.sent,e.signedIn=!0,e.userName=r.username,e.checkIfUserExists(e.userName),t.next=10;break;case 9:e.signedIn=!1;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},R=O,C=(n("8cfc"),n("2877")),I=Object(C["a"])(R,i,u,!1,null,null,null),j=I.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),n("main",[e._m(1),n("div",{staticClass:"main-contents"},[n("div",{staticClass:"message_base"},e._l(e.messages,(function(t){return n("div",{key:t.id},[n("div",{class:[t.username===e.userName?"message":"message_opponent"]},[e._v(e._s(t.content))]),n("div",{class:[t.username===e.userName?"username":"username_opponent"]},[e._v(e._s(t.username))])])})),0),n("div",{staticClass:"error"},[e._v(e._s(this.error))])]),e._v(" aaaaa ")])])},$=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h1",{staticClass:"headline"},[n("a",[e._v("みんラジ!")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[n("h2",[e._v("Amplifyで作るチャットアプリ")])])}],N="\n  subscription OnCreateMessage {\n    onCreateMessage {\n      id\n      username\n      content\n      roomid {\n        id\n        movie\n        tilte\n        numberofmember\n        privatepassword\n        users {\n          nextToken\n        }\n        time\n        reservedtime\n        messages {\n          nextToken\n        }\n      }\n    }\n  }\n",S="\n  subscription OnUpdateRoom {\n    onUpdateRoom {\n      id\n      movie\n      tilte\n      numberofmember\n      privatepassword\n      users {\n        items {\n          id\n          username\n        }\n        nextToken\n      }\n      time\n      reservedtime\n      messages {\n        items {\n          id\n          username\n          content\n        }\n        nextToken\n      }\n    }\n  }\n";window.LOG_LEVEL="VERBOSE";var U={name:"chat",data:function(){return{messages:[],content:"",userName:"",subscription:{},error:""}},methods:{sendMessage:function(){var e=this;if(13===event.keyCode){var t={id:(new Date).getTime()+this.userName,username:this.userName,content:this.content};m["a"].graphql(Object(d["b"])(b,{input:t})).catch((function(t){return e.error=JSON.stringify(t)})),this.content=""}},fetch:function(){var e=this;m["a"].graphql(Object(d["b"])(p,{limit:100})).then((function(t){return e.messages=t.data.listMessages.items.sort((function(e,t){return e.id>t.id?1:-1}))})).catch((function(t){return e.error=JSON.stringify(t)}))},subscribe:function(){var e=this;this.subscription=m["a"].graphql(Object(d["b"])(N)).subscribe({next:function(t){var n=t.value.data.onCreateMessage;e.messages.push(n)}})},beforeDestroy:function(){this.subscription.unsubscribe()},scrollBottom:function(){var e=this.$el.querySelector(".message_base");e.scrollTop=e.scrollHeight}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].currentAuthenticatedUser();case 2:e.userName=t.sent.username,e.fetch(),e.subscribe();case 5:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){},updated:function(){this.scrollBottom()}},T=U,q=Object(C["a"])(T,E,$,!1,null,null,null),M=q.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",[e._m(0),n("ul",{staticClass:"nav-list"},[n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/"}},[n("button",{attrs:{id:"back-home-button"}},[e._v("ホーム")])])],1),n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/room_create"}},[n("button",{attrs:{id:"create-room-button"}},[e._v("ルームを作成する")])])],1),n("li",{staticClass:"nav-list-item"},[n("amplify-sign-out")],1)])]),n("main",[n("section",[n("section",[n("h2",[e._v("ルーム広場")]),n("p",[e._v("ここはルームに入る待機場所です。「ルームを作成する」ボタンを押したら、ルームを作成するページに移動するので そこでルームを作成してください。 ")]),n("router-link",{attrs:{to:"/room_create"}},[n("button",{attrs:{id:"create-room-button"}},[e._v("ルームを作成する")])])],1),n("section",[n("div",{staticClass:"main-contents"},[n("h2",[e._v("作成したルーム一覧")]),n("p",[e._v("作成されたルーム一覧です。自分が作ったルームに入りましょう。")]),e._l(e.rooms,(function(t){return n("div",{key:t.id,attrs:{id:"room"}},[n("button",{attrs:{id:"go-my-room-button"},on:{click:function(n){return e.passCheck(t.id)}}},[e._v(e._s(t.tilte))]),e._v(" 参加者 : "+e._s(t.numberofmember)+" 名 開始時刻 : "+e._s(t.reservedtime)+" ")])})),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showContent,expression:"showContent"}],attrs:{id:"overlay"}},[n("input",{attrs:{id:"password-input",placeholder:"ルームのパスワードを入力してください",size:"20",type:"text",value:""}}),n("button",{attrs:{id:"password-send-button"},on:{click:e.passwordInput}},[e._v("送る")]),n("br"),n("p",[n("button",{attrs:{id:"password-close-button"},on:{click:e.closeModel}},[e._v("閉じる")])]),n("br"),n("p",{attrs:{id:"errormessage"}})]),n("div",{staticClass:"error"},[e._v(e._s(this.error))])],2)]),n("section",[n("h2",[e._v("予定の確認")]),n("p",[e._v("「カレンダーページ」ボタンを押すとカレンダーが表示されて、作成されたルームの確認ができます。")]),n("router-link",{attrs:{to:"/calendar"}},[n("button",{attrs:{id:"go-calendar-button"}},[e._v("カレンダーページ")])])],1)])])])},A=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"headline"},[n("a",[e._v("みんラジ!")])])}],D=n("8e67"),B=n.n(D);window.LOG_LEVEL="VERBOSE";var P={name:"chat",data:function(){return{userName:"",userId:"",members:[],error:"",rooms:[],showContent:!1,password:"",passcheck:!1,roomId:""}},methods:{fetch:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return B.a,n=100,t.next=4,m["a"].graphql(Object(d["b"])(g,{limit:n}));case 4:r=t.sent,e.rooms=r.data.listRooms.items;case 6:case"end":return t.stop()}}),t)})))()},gotoroom:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={id:e.userId,username:e.userName,userRoomidId:e.roomId},t.next=3,m["a"].graphql(Object(d["b"])(w,{input:n})).catch((function(t){return e.error=JSON.stringify(t)}));case 3:at.push("/room/in");case 4:case"end":return t.stop()}}),t)})))()},passwordInput:function(){console.log(this.passcheck);var e=document.getElementById("password-input").value;if(e===this.password)this.showContent=!1,this.gotoroom();else{var t=document.getElementById("errormessage");t.innerHTML="パスワードが違います"}},passCheck:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.roomId=e,n.next=3,m["a"].graphql(Object(d["b"])(f,{id:t.roomId}));case 3:r=n.sent,console.log(r.data.getRoom.privatepassword),r.data.getRoom.privatepassword?(console.log("passcheck"),t.password=r.data.getRoom.privatepassword,t.showContent=!0):t.gotoroom();case 6:case"end":return n.stop()}}),n)})))()},inituserdata:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].currentAuthenticatedUser();case 3:n=t.sent,e.userName=n.username,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("error getting user data... ",t.t0);case 10:if(console.log("username:",e.userName),""===e.userName){t.next=17;break}return t.next=14,m["a"].graphql(Object(d["b"])(h,{filter:{username:{eq:e.userName}}}));case 14:r=t.sent,console.log(r.data.listUsers.items[0].id),e.userId=r.data.listUsers.items[0].id;case 17:case"end":return t.stop()}}),t,null,[[0,7]])})))()},init:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=100,t.next=4,m["a"].graphql(Object(d["b"])(g,{limit:n}));case 4:r=t.sent,e.rooms=r.data.listRooms.items,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("error getting room data... ",t.t0);case 11:for(a=0;a<e.rooms.length;a++)console.log(e.rooms[a]),s=e.rooms[a].id,e.upDateRoom(s);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},upDateRoom:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,m["a"].graphql(Object(d["b"])(f,{id:e}));case 2:return r=n.sent,a=r.data.getRoom.users.items.length,s={id:e,numberofmember:a},console.log(s),n.next=8,m["a"].graphql(Object(d["b"])(k,{input:s})).catch((function(e){return t.error=JSON.stringify(e)}));case 8:case"end":return n.stop()}}),n)})))()},closeModel:function(){this.showContent=!1}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.inituserdata();case 2:return t.next=4,e.init();case 4:console.log(e.userName,e.userId),e.fetch();case 6:case"end":return t.stop()}}),t)})))()}},V=P,J=Object(C["a"])(V,L,A,!1,null,null,null),H=J.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",[e._m(0),n("ul",{staticClass:"nav-list"},[n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/"}},[n("button",{attrs:{id:"back-home-button"}},[e._v("ホーム")])])],1),n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/room"}},[n("button",{attrs:{id:"go-room-button"}},[e._v("ルーム広場に戻る")])])],1),n("li",{staticClass:"nav-list-item"},[n("amplify-sign-out")],1)])]),n("main",[e._m(1),n("div",{staticClass:"main-contents"},[n("form",{attrs:{id:"movie1"}},[e._m(2),e._m(3),e._m(4),e._m(5),n("p",{attrs:{id:"errormessage"}}),e._m(6),n("div",{attrs:{id:"input6"}},[n("input",{attrs:{type:"button",value:"ルームを作る",id:"room-create-button"},on:{click:e.roomCreate}})])]),n("div",{staticClass:"error"},[e._v(e._s(this.error))])])])])},F=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"headline"},[n("a",[e._v("みんラジ!")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("h2",[e._v("ルーム作成")]),n("p",[e._v("ここはルーム作成ページです。ルームタイトルにルーム名を記入して、youtubeにあるラジオ体操の動画のURLを下のボックスにいれて「ルームを作る」ボタンを押してください。 プレイベートルームを希望の方は、「プライベートルームにする」にチェックをつけてパスワードを入力してください。 「ルームを作る」ボタンを押したら自動的にルーム広場に戻ります。ルーム広場では作成したルームに入ってください。 ")]),n("p",[e._v(" 例えば、https://www.youtube.com/watch?v=5sYm_3z6NsQ の動画を使ってルームを作るとします。 URLを全部下のボックスに貼ります。 ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"input1"}},[n("input",{attrs:{id:"title",placeholder:"ルームタイトルを入力してください",size:"30",type:"text",value:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"input2"}},[e._v(" ルームの開始日時を入力してください "),n("input",{attrs:{type:"date",id:"reserveddate",size:"30",value:"",name:"today"}}),n("input",{attrs:{type:"time",id:"reservedtime",size:"30",value:"",step:"300"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"input3"}},[n("input",{attrs:{id:"movie",placeholder:"Youtubeのリンク入力をしてください",size:"30",type:"text",value:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"input4"}},[n("input",{attrs:{type:"checkbox",id:"check"}}),e._v("プライベートルームにする ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"input5"}},[n("input",{attrs:{id:"password",placeholder:"パスワードを入力してください",size:"30",type:"text",value:""}})])}],G=(n("fb6a"),{name:"room",data:function(){return{roomNumber:[],userData:[],userName:"",error:""}},methods:{roomCreate:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s,o,i,u,c,l,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=(new Date).getTime()+e.userName,r=document.getElementById("movie").value,a=document.getElementById("title").value,s=document.getElementById("reserveddate").value,o=s+" "+document.getElementById("reservedtime").value+":00",i=document.getElementById("password").value,u=document.getElementById("check").checked,console.log(o),u||(i=null),r&&a&&o){t.next=13;break}return c=document.getElementById("errormessage"),c.innerHTML="ルーム情報が無効です",t.abrupt("return");case 13:if(!u||i){t.next=17;break}return l=document.getElementById("errormessage"),l.innerHTML="パスワードを入力してください",t.abrupt("return");case 17:return console.log(i),p={id:n,movie:r,tilte:a,numberofmember:0,privatepassword:i,reservedtime:o},console.log(p),t.next=22,m["a"].graphql(Object(d["b"])(y,{input:p})).catch((function(t){return e.error=JSON.stringify(t)}));case 22:at.push({name:"room"});case 23:case"end":return t.stop()}}),t)})))()},initializedate:function(){var e=new Date;e.setDate(e.getDate());var t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=("0"+e.getDate()).slice(-2);document.getElementById("reserveddate").value=t+"-"+n+"-"+r;var a=("0"+e.getHours()).slice(-2),s=("0"+(e.getMinutes()+1)).slice(-2);document.getElementById("reservedtime").value=a+":"+s},inituserdata:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].currentAuthenticatedUser();case 3:n=t.sent,e.userName=n.username,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("error getting user data... ",t.t0);case 10:if(console.log("username:",e.userName),""===e.userName){t.next=17;break}return t.next=14,m["a"].graphql(Object(d["b"])(h,{filter:{username:{eq:e.userName}}}));case 14:r=t.sent,console.log(r.data.listUsers.items[0].id),e.userId=r.data.listUsers.items[0].id;case 17:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.inituserdata();case 2:e.initializedate();case 3:case"end":return t.stop()}}),t)})))()}}),Q=G,W=Object(C["a"])(Q,z,F,!1,null,null,null),Y=W.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",[e._m(0),n("ul",{staticClass:"nav-list"},[n("li",{staticClass:"nav-list-item"},[n("amplify-sign-out")],1)])]),n("main",[n("section",[e._m(1),n("section",[n("div",{attrs:{align:"center"}},[e._v("ログイン画面")]),n("div",{staticClass:"login-screen"},[n("amplify-authenticator",{attrs:{authConfig:e.authConfig}})],1)])])])])},K=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"headline"},[n("a",[e._v("みんラジ!")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("h2",[e._v("サインイン")]),n("p",[e._v("ユーザー名とパスワードを入力してサインインしてください。もしログイン画面が表示されないなら、もう一度「サインアウト」ボタンを押してホームに戻り「ログインする」ボタンを押してください。")])])}],X={name:"login",data:function(){return{authConfig:{signUpConfig:{hiddenDefaults:["phone_number"]}}}}},ee=X,te=(n("1253"),Object(C["a"])(ee,Z,K,!1,null,null,null)),ne=te.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",[e._m(0),n("ul",{staticClass:"nav-list"},[n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/"}},[n("button",{attrs:{id:"back-home-button"}},[e._v("ホーム")])])],1),n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/room"}},[n("button",{attrs:{id:"go-room-button"}},[e._v("ルーム広場に戻る")])])],1),n("li",{staticClass:"nav-list-item"},[n("amplify-sign-out")],1)])]),n("main",[n("section",[n("h2",[e._v("ルーム")]),n("p",[e._v("ここはルームの中です。動画をみてラジオ体操をしましょう。 ラジオ体操が終わったら「ルームを消す」ボタンを押して、ルーム広場に戻りましょう。")]),n("div",{attrs:{id:"all-members"}},[n("h2",[e._v("参加者一覧")]),e._v(" 参加者 : "+e._s(e.members.length)+" 名 "),e._l(e.members,(function(t){return n("div",{key:t.id},[e._v(" "+e._s(t.username)+" ")])}))],2)]),n("section",[n("div",{attrs:{align:"center"}},[n("youtube",{ref:"youtube",attrs:{"video-id":e.video_url},on:{playing:e.playing,cued:e.cued,ready:e.ready,ended:e.ended,paused:e.paused,buffering:e.buffering}})],1),n("br"),n("div",{attrs:{id:"two-buttons-up"}},[n("button",{attrs:{id:"play-button"},on:{click:e.playVideo}},[e._v("play")]),n("button",{attrs:{id:"chat-button"},on:{click:e.chat}},[e._v("チャットする")])]),n("div",{attrs:{id:"two-buttons-down"}},[n("button",{attrs:{id:"delete-room-button"},on:{click:e.delete_room}},[e._v("ルームを消す")]),n("router-link",{attrs:{to:"/room"}},[n("button",{attrs:{id:"go-room-button"}},[e._v("ルーム広場に戻る")])])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showContent,expression:"showContent"}],attrs:{id:"overlay"}},[n("div",{attrs:{id:"main-contents"}},e._l(e.messages,(function(t){return n("div",{key:t.id},[n("div",{attrs:{id:"message_base"}},[n("div",{class:[t.username===e.userName?"message":"message_opponent"]},[e._v(e._s(t.content))]),n("div",{class:[t.username===e.userName?"username":"username_opponent"]},[e._v(e._s(t.username))])])])})),0),n("table",[e._m(1),n("tr",[n("div",[n("button",{attrs:{id:"sendMessage"},on:{click:e.sendMessage}},[e._v("送る")]),n("button",{attrs:{id:"chat-close"},on:{click:e.closeModel}},[e._v("閉じる")])])])])])])])])},ae=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"headline"},[n("a",[e._v("みんラジ!")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("div",[n("input",{attrs:{id:"messageinput",placeholder:"メッセージを入力してください",size:"25",type:"text",value:""}})])])}],se=(n("ac1f"),n("466d"),n("1276"),n("e0ec")),oe=n.n(se);r["default"].use(oe.a);var ie={name:"room",data:function(){return{video_url:"",subscriptionchat:{},subscriptionmem:{},error:"",roomId:"",members:[],userName:"",userId:"",showContent:!1,messages:[],createdTime:"",nowTime:""}},methods:{fetch:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].graphql(Object(d["b"])(f,{id:e.roomId}));case 2:n=t.sent,e.messages=n.data.getRoom.messages.items,console.log(e.messages);case 5:case"end":return t.stop()}}),t)})))()},playVideo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.sendSeek(30);case 2:return e.player.playVideo(),t.t0=console,t.next=6,e.player.getPlayerState();case 6:t.t1=t.sent,t.t0.log.call(t.t0,t.t1);case 8:case"end":return t.stop()}}),t)})))()},ready:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Now we are ready for stream!!!"),t.t0=console,t.next=4,e.player.getPlayerState();case 4:t.t1=t.sent,t.t0.log.call(t.t0,t.t1),e.sendSeek(30);case 7:case"end":return t.stop()}}),t)})))()},playing:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("we are watching!!!"),console.log(e.player.getPlayerState());case 2:case"end":return t.stop()}}),t)})))()},cued:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("cued"),t.t0=console,t.next=4,e.player.getPlayerState();case 4:t.t1=t.sent,t.t0.log.call(t.t0,t.t1);case 6:case"end":return t.stop()}}),t)})))()},ended:function(){console.log("ended"),console.log(this.player.getPlayerState())},paused:function(){console.log("paused"),console.log(this.player.getPlayerState())},buffering:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("buffering"),console.log(e.player.getPlayerState()),setTimeout(console.log("7777777"),5e3),t.next=5,e.checkTime();case 5:case"end":return t.stop()}}),t)})))()},sendSeek:function(e){this.player.seekTo(e)},chat:function(){this.showContent=!0},sendMessage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=document.getElementById("messageinput"),n.value){t.next=3;break}return t.abrupt("return");case 3:return r={id:(new Date).getTime()+e.userName,username:e.userName,content:n.value,messageRoomidId:e.roomId},n.value="",t.next=7,m["a"].graphql(Object(d["b"])(b,{input:r})).catch((function(t){return e.error=JSON.stringify(t)}));case 7:case"end":return t.stop()}}),t)})))()},delete_room:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={id:e.roomId},console.log(n),t.next=4,m["a"].graphql(Object(d["b"])(x,{input:n})).catch((function(t){return e.error=JSON.stringify(t)}));case 4:at.push({name:"room"});case 5:case"end":return t.stop()}}),t)})))()},subscribe:function(){var e=this;this.subscriptionchat=m["a"].graphql(Object(d["b"])(N)).subscribe({next:function(t){var n=t.value.data.onCreateMessage;console.log(n.roomid),n.roomid.id===e.roomId&&e.messages.push(n)}}),this.subscriptionmem=m["a"].graphql(Object(d["b"])(S)).subscribe({next:function(t){var n=t.value.data.onUpdateRoom;console.log(n.users.items),n.id===e.roomId&&(e.members=n.users.items)}})},inituserdata:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].currentAuthenticatedUser();case 3:n=t.sent,e.userName=n.username,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("error getting user data... ",t.t0);case 10:if(console.log("username:",e.userName),""===e.userName){t.next=17;break}return t.next=14,m["a"].graphql(Object(d["b"])(h,{filter:{username:{eq:e.userName}}}));case 14:r=t.sent,console.log(r.data.listUsers.items[0].id),e.userId=r.data.listUsers.items[0].id;case 17:case"end":return t.stop()}}),t,null,[[0,7]])})))()},closeModel:function(){this.showContent=!1},initializedate:function(){var e=new Date;e.setDate(e.getDate());var t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=("0"+e.getDate()).slice(-2),a=("0"+e.getHours()).slice(-2),s=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2);this.nowTime=t+"-"+n+"-"+r+" "+a+":"+s+":"+o},checkTime:function(){this.initializedate();var e=this.createdTime.split(" "),t=this.nowTime.split(" ");if(console.log(e[0]),console.log(t[0]),e[0].match(t[0])!=/(\d{4})-(\d{2})-(\d{2})/){console.log("day matched!");var n=e[1].split(":"),r=t[1].split(":"),a=3600*(r[0]-n[0])+60*(r[1]-n[1])+(r[2]-n[2]);console.log(a),a<0?(this.player.pauseVideo(),console.log("waiting"),setTimeout(this.player.playVideo(),Math.abs(1e3*a))):this.sendSeek(a)}}},computed:{player:function(){return this.$refs.youtube.player}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.inituserdata();case 2:return t.next=4,m["a"].graphql(Object(d["b"])(v,{id:e.userId}));case 4:return n=t.sent,console.log(n.data.getUser.roomid),r=n.data.getUser.roomid,e.video_url=Object(se["getIdFromUrl"])(r.movie),e.roomId=r.id,e.createdTime=r.reservedtime,t.next=12,m["a"].graphql(Object(d["b"])(f,{id:e.roomId}));case 12:a=t.sent,e.members=a.data.getRoom.users.items,console.log(e.members.length),console.log("created: "+e.createdTime),console.log("now: "+e.nowTime),e.fetch(),e.subscribe();case 19:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.subscriptionchat.unsubscribe(),this.subscriptionmem.unsubscribe()},destroyed:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={id:e.userId,userRoomidId:null},t.next=3,m["a"].graphql(Object(d["b"])(w,{input:n})).catch((function(t){return e.error=JSON.stringify(t)}));case 3:case"end":return t.stop()}}),t)})))()}},ue=ie,ce=Object(C["a"])(ue,re,ae,!1,null,null,null),le=ce.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" ここはフルコメントアウトです。 "),n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.videoUrl,expression:"videoUrl"}],attrs:{placeholder:"URLを入力"},domProps:{value:e.videoUrl},on:{input:function(t){t.target.composing||(e.videoUrl=t.target.value)}}})]),n("youtube",{ref:"youtube",attrs:{"video-id":e.videoId,"player-vars":e.playerVars},on:{playing:e.playing,cued:e.cued,ready:e.ready,ended:e.ended,paused:e.paused,buffering:e.buffering}},[e._v(">")]),n("p",[e._v(' Original URL : "'+e._s(e.videoUrl)+'" generated ID : "'+e._s(e.videoId)+'" ')]),n("button",{on:{click:e.playVideo}},[e._v("play")]),n("p",[n("input",{attrs:{id:"seektime",placeholder:"飛ばしたい時間を入力(Enterで送信)",type:"text",value:""}}),n("input",{attrs:{type:"button",value:"時間とばし"},on:{click:function(t){return e.sendSeek()}}})])],1)},de=[];window.LOG_LEVEL="VERBOSE",r["default"].use(oe.a);var pe={data:function(){return{videoUrl:"https://www.youtube.com/watch?v=JyMPBn25wP4",seconds:"",messages:[],content:"",userName:"",subscription:{},error:""}},methods:{playVideo:function(){this.player.playVideo()},playing:function(){console.log("we are watching!!!")},ready:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Now we are ready for stream!!!"),t.t0=console,t.next=4,e.player.getPlayerState();case 4:t.t1=t.sent,t.t0.log.call(t.t0,t.t1);case 6:case"end":return t.stop()}}),t)})))()},cued:function(){console.log("cued"),console.log(this.player.getPlayerState())},ended:function(){console.log("ended"),console.log(this.player.getPlayerState())},paused:function(){console.log("paused"),console.log(this.player.getPlayerState())},buffering:function(){console.log("buffering"),console.log(this.player.getPlayerState())},sendSeek:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=document.getElementById("seektime").value,t.t0=console,t.next=4,e.player.getPlayerState();case 4:return t.t1=t.sent,t.t0.log.call(t.t0,t.t1),e.player.seekTo(n),t.t2=console,t.next=10,e.player.getPlayerState();case 10:t.t3=t.sent,t.t2.log.call(t.t2,t.t3);case 12:case"end":return t.stop()}}),t)})))()},sendMessage:function(){var e=this;if(13===event.keyCode){var t={id:(new Date).getTime()+this.userName,username:this.userName,content:this.content};m["a"].graphql(Object(d["b"])(b,{input:t})).catch((function(t){return e.error=JSON.stringify(t)})),this.content="",console.log("mut")}},fetch:function(){var e=this;m["a"].graphql(Object(d["b"])(p,{limit:200})).then((function(t){return e.messages=t.data.listMessages.items.sort((function(e,t){return e.id>t.id?1:-1}))})).catch((function(t){return e.error=JSON.stringify(t)})),console.log("query")},subscribe:function(){var e=this;this.subscription=m["a"].graphql(Object(d["b"])(N)).subscribe({next:function(t){var n=t.value.data.onCreateMessage;e.messages.push(n),console.log("subs"),console.log(e.messages),console.log(e.messages.content)}})}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].currentAuthenticatedUser();case 2:e.userName=t.sent.username,e.fetch(),e.subscribe();case 5:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.subscription.unsubscribe()},computed:{player:function(){return this.$refs.youtube.player},videoId:function(){var e=this.videoUrl.match(/\?v=([^&]+)/);return e[1]},currentTime:function(){return this.$refs.youtube.player.getCurrentTime()},playerState:function(){return this.$refs.youtube.player.getPlayerState()}}},ve=pe,he=(n("6857"),Object(C["a"])(ve,me,de,!1,null,null,null)),fe=he.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("main",[n("div",{attrs:{id:"calendar-parameter"}},[n("FullCalendar",{attrs:{"default-view":"dayGridMonth",locale:e.locale,header:e.calendarHeader,weekends:e.calendarWeekends,plugins:e.calendarPlugins,events:e.calendarEvents,selectable:e.calendarSelectable},on:{eventClick:e.eventClick}})],1),n("div",{staticClass:"p-modal",class:{"is-open":e.isModalActive}},[n("p",[e._v("ポップアップテスト")]),n("p",[e._v(e._s(e.roomtitle))]),n("p",[n("button",{on:{click:e.openItem}},[e._v("close")])])]),n("table",[n("td",[n("router-link",{attrs:{to:"/"}},[n("button",{attrs:{id:"back-home-button"}},[e._v("ホーム")])])],1),n("td",[n("router-link",{attrs:{to:"/room"}},[n("button",{attrs:{id:"go-room-button"}},[e._v("ルーム広場に戻る")])])],1),n("td",[n("amplify-sign-out")],1)])])])},be=[],_e=n("be37"),we=n.n(_e),ye=n("dc09"),ke=n("88e1"),xe=n("a7c0"),Oe=n("19bc"),Re=n("657a"),Ce=n.n(Re),Ie={name:"calendar",components:{FullCalendar:ye["a"]},data:function(){return{userName:"",userId:"",members:[],error:"",rooms:[],locale:Ce.a,calendarHeader:{left:"prev,next today",center:"title",right:"dayGridMonth,Week,Day,listWeek"},calendarWeekends:!0,calendarPlugins:[ke["d"],xe["a"],Oe["a"]],calendarEvents:[],calendarSelectable:!0,isModalActive:!1,roomtitle:""}},methods:{fetch:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=100,t.next=3,m["a"].graphql(Object(d["b"])(g,{limit:n}));case 3:r=t.sent,e.rooms=r.data.listRooms.items,e.addCalendarEvents(e.rooms);case 6:case"end":return t.stop()}}),t)})))()},addCalendarEvents:function(e){for(var t in console.log("add eventの中"),e)console.log(e[0].id),console.log(e[0].tilte),console.log(e[0].createdAt),this.calendarEvents.push({title:e[t].tilte,start:(new Date).getTime()})},eventClick:function(e){this.roomtitle=e.text,this.openItem(),console.log(e),console.log(e.event.title)},openItem:function(){this.toggleModal()},toggleModal:function(){this.isModalActive=!this.isModalActive}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,we.a;case 2:n=t.sent,r=n.username,a=n.userid,console.log(we.a),e.userName=r,e.userId=a,e.fetch(),e.addCalendarEvents(e.rooms);case 10:case"end":return t.stop()}}),t)})))()}},je=Ie,Ee=(n("c06c"),Object(C["a"])(je,ge,be,!1,null,null,null)),$e=Ee.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",[e._m(0),n("div",[n("ul",{staticClass:"nav-list"},[n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/"}},[n("button",{attrs:{id:"back-home-button"}},[e._v("ホーム")])])],1),e.signedIn?n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/room"}},[n("button",{attrs:{id:"go-room-button"}},[e._v("ルーム広場に行く")])])],1):e._e(),e.signedIn?n("li",{staticClass:"nav-list-item"},[n("amplify-sign-out")],1):e._e(),e.signedIn?e._e():n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/login"}},[n("button",{attrs:{id:"login-button"}},[e._v("ログインする")])])],1)])])]),e._m(1)])},Se=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"headline"},[n("a",[e._v("みんラジ!")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("section",[r("a",{attrs:{name:"link2how2use",id:"home_link2how2use"}},[r("h2",[e._v("How to use")])]),r("h3",[e._v("1. 新規会員登録")]),r("p",[e._v("まず「ログインする」ボタンを押しましょう。そうすればログインページに移動します。 ログイン画面の「新規登録」を押してください。メールアドレスが必要です。 ")]),r("h3",[e._v("2. ログイン")]),r("p",[e._v("新規登録が済んだ方もしくはすでに登録した方は、 「ログインする」ボタンを押してログイン画面に登録したユーザー名とパスワードを入力してログインしましょう。")]),r("h3",[e._v("3. ルーム広場に行く")]),r("p",[e._v("「ルーム広場に行く」ボタンを押しましょう。ルーム広場はラジオ体操する前の待機場所です。")]),r("h3",[e._v("4. ルームを作成する")]),r("p",[e._v("ルーム広場にある「ルームを作成する」ボタンを押しましょう。ルームを作成するページに飛びます。 自分の好きな体操の動画のURLを入力してください。")]),r("h3",[e._v("5. 作成したルームにいく")]),r("p",[e._v("ルームを作成したら、「ルーム広場に戻る」ボタンを押してください。 ルーム一覧にある自分が作成したルームのボタンを押してください。ルームに移動できます。")]),r("h3",[e._v("6. ラジオ体操")]),r("p",[e._v("人と一緒に動画をみてラジオ体操をしましょう。終わったらルームから出ましょう。 ラジオ体操が終わったら「ルーム広場に戻る」ボタンを押してルーム広場に戻りましょう。 ")]),r("p",[r("img",{attrs:{src:n("80ec"),id:"computer_school_girl",alt:"ラジオ体操",width:"20%"}}),r("img",{attrs:{src:n("d506"),id:"radio_taiso",alt:"ラジオ体操",width:"20%"}})])])])}];window.LOG_LEVEL="VERBOSE";var Ue={name:"home",data:function(){return{signedIn:!1,username:""}},beforeCreate:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].currentAuthenticatedUser();case 3:n=t.sent,e.signedIn=!0,e.username=n.username,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.signedIn=!1;case 11:l["AmplifyEventBus"].$on("authState",function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("signedIn"!==n){t.next=8;break}return t.next=3,c["a"].currentAuthenticatedUser();case 3:r=t.sent,e.signedIn=!0,e.username=r.username,t.next=9;break;case 8:e.signedIn=!1;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},Te=Ue,qe=Object(C["a"])(Te,Ne,Se,!1,null,null,null),Me=qe.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",[e._m(0),n("ul",{staticClass:"nav-list"},[n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/",id:"back-home-button"}},[e._v(" ホーム")])],1),n("li",{staticClass:"nav-list-item"},[n("router-link",{attrs:{to:"/room",id:"back-room-button-header"}},[e._v("ルーム広場に行く")])],1),n("li",{staticClass:"nav-list-item"},[n("amplify-sign-out")],1)])]),n("main",[n("section",[n("section",[n("calendar")],1)])])])},Ae=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"headline"},[n("a",[e._v("みんラジ!")])])}];window.LOG_LEVEL="VERBOSE";var De={name:"chat",components:{calendar:$e},data:function(){return{userName:"",members:[],error:"",rooms:[],room_id:""}},methods:{fetch:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].graphql(Object(d["b"])(g,{limit:10}));case 2:n=t.sent,e.rooms=n.data.listRooms.items,r=0;case 5:if(!(r<e.rooms.length)){t.next=13;break}return t.next=8,m["a"].graphql(Object(d["b"])(f,{id:e.rooms[r].id}));case 8:a=t.sent,e.members.push(a.getRoom.users.items.length);case 10:r++,t.next=5;break;case 13:console.log(e.rooms);case 14:case"end":return t.stop()}}),t)})))()},gotoroom:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,s,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,m["a"].graphql(Object(d["b"])(h,{filter:{username:{eq:t.userName}}}));case 2:return r=n.sent,a=r.data.listUsers.items[0],console.log(a),console.log(document.getElementById("room").textContent),n.next=8,m["a"].graphql(Object(d["b"])(f,{id:e}));case 8:return s=n.sent,console.log(s.data.getRoom.users.items),t.members=s.data.getRoom.users.items,o=s.data.getRoom.users,i={id:a.id,username:t.userName,userRoomidId:o.id},console.log(i),n.next=16,m["a"].graphql(Object(d["b"])(w,{input:i})).catch((function(e){return t.error=JSON.stringify(e)}));case 16:at.push("/room/in");case 17:case"end":return n.stop()}}),n)})))()}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].currentAuthenticatedUser();case 2:return e.userName=t.sent.username,t.next=5,m["a"].graphql(Object(d["b"])(h,{filter:{username:{eq:e.userName}}}));case 5:n=t.sent,console.log(n.data.listUsers.items.length),console.log(!n.data.listUsers.items.length),n.data.listUsers.items.length||(r={id:(new Date).getTime()+e.userName,username:e.userName},m["a"].graphql(Object(d["b"])(_,{input:r})).catch((function(t){return e.error=JSON.stringify(t)})),console.log(r)),e.fetch();case 10:case"end":return t.stop()}}),t)})))()}},Be=De,Pe=(n("b6ae"),Object(C["a"])(Be,Le,Ae,!1,null,null,null)),Ve=Pe.exports,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),n("main",[n("div",{staticClass:"main-contents"},[n("div",{staticClass:"message_base"},e._l(e.messages,(function(t){return n("div",{key:t.id},[n("div",{class:[t.username===e.userName?"message":"message_opponent"]},[e._v(e._s(t.content))]),n("div",{class:[t.username===e.userName?"username":"username_opponent"]},[e._v(e._s(t.username))])])})),0),n("input",{attrs:{id:"messageinput",placeholder:"メッセージを入力してください",size:"30",type:"text",value:""}}),n("button",{attrs:{id:"sendMessage"},on:{click:e.sendMessage}},[e._v("send")]),n("router-link",{attrs:{to:"/room/in",id:"chatgroup"}},[e._v("test")]),n("div",{staticClass:"error"},[e._v(e._s(this.error))])],1)])])},He=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h1",{staticClass:"headline"},[n("a",[e._v("みんラジ!")])])])}];window.LOG_LEVEL="VERBOSE";var ze,Fe={data:function(){return{messages:[],roomId:"",userName:"",userId:"",error:"",subscription:{}}},methods:{fetch:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].graphql(Object(d["b"])(f,{id:e.roomId}));case 2:n=t.sent,e.messages=n.data.getRoom.messages.items,console.log(e.messages);case 5:case"end":return t.stop()}}),t)})))()},sendMessage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=document.getElementById("messageinput").value,r={id:(new Date).getTime()+e.userName,username:e.userName,content:n,messageRoomidId:e.roomId},console.log(r),t.next=5,m["a"].graphql(Object(d["b"])(b,{input:r})).catch((function(t){return e.error=JSON.stringify(t)}));case 5:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,we.a;case 2:return n=t.sent,r=n.username,a=n.userid,e.userName=r,e.userId=a,t.next=9,m["a"].graphql(Object(d["b"])(v,{id:e.userId}));case 9:s=t.sent,console.log(s.data.getUser.roomid.id),e.roomId=s.data.getUser.roomid.id,e.fetch();case 13:case"end":return t.stop()}}),t)})))()}},Ge=Fe,Qe=Object(C["a"])(Ge,Je,He,!1,null,null,null),We=Qe.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 準備中 ")])},Ze=[],Ke={},Xe=Object(C["a"])(Ke,Ye,Ze,!1,null,null,null),et=Xe.exports,tt=n("00bd");function nt(){return r["default"].prototype.$Amplify.Auth.currentAuthenticatedUser().then((function(e){if(e&&e.signInUserSession)return e})).catch((function(){return null}))}r["default"].use(l["AmplifyPlugin"],tt["default"]),r["default"].use(o["a"]),nt().then((function(e){e&&rt.push({path:"/"})})),l["AmplifyEventBus"].$on("authState",function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("signedOut"!==t){e.next=5;break}ze=null,rt.push({path:"/"}),e.next=10;break;case 5:if("signedIn"!==t){e.next=10;break}return e.next=8,nt();case 8:ze=e.sent,rt.push({path:"/"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var rt=new o["a"]({mode:"history",routes:[{path:"/login",name:"login",component:ne},{path:"/",name:"home",component:j,meta:{requireAuth:!0}},{path:"/chat",name:"chat",component:M},{path:"/room",name:"room",component:H},{path:"/room_create",name:"room_create",component:Y},{path:"/room/in",name:"in_the_room",component:le},{path:"/movie",name:"Movie",component:fe},{path:"/use",name:"Use",component:Me},{path:"/cal_page",name:"Cal_page",component:Ve},{path:"/calendar",name:"calendar",component:$e},{path:"/chatgroup",name:"chatgroup",component:We},{path:"/mypage",name:"mypage",component:et}],scrollBehavior:function(e,t,n){return n?(sessionStorage.setItem("positionY",n.y),n):(sessionStorage.setItem("positionY",0),{x:0,y:0})}});rt.beforeResolve(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.matched.some((function(e){return e.meta.requiresAuth}))){e.next=7;break}return e.next=3,nt();case 3:if(ze=e.sent,ze){e.next=6;break}return e.abrupt("return",r({path:"/login"}));case 6:return e.abrupt("return",r());case 7:return e.abrupt("return",r());case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var at=rt,st=n("2482"),ot={aws_project_region:"ap-northeast-1",aws_cognito_identity_pool_id:"ap-northeast-1:1565afac-205d-4c30-b553-abb3eba5e833",aws_cognito_region:"ap-northeast-1",aws_user_pools_id:"ap-northeast-1_cMJeDp9HF",aws_user_pools_web_client_id:"3ki05snh7uehaqurs3fkta4201",oauth:{},aws_appsync_graphqlEndpoint:"https://3kel5kvnuvehfifncb4qcs2kg4.appsync-api.ap-northeast-1.amazonaws.com/graphql",aws_appsync_region:"ap-northeast-1",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS"},it=ot;tt["default"].configure(it),r["default"].use(l["AmplifyPlugin"],tt),r["default"].config.productionTip=!1;var ut={ja:{"Back to Sign In":"サインイン画面に戻る",Confirm:"確認","Confirm Sign Up":"サインアップの確認","Confirmation Code":"確認コード","Create Account":"新規登録","Create a new account":"アカウントの新規登録","Create account":"新規登録",Email:"メールアドレス","Enter your code":"確認コードを入力してください","Enter your password":"パスワードを入力してください","Enter your Username":"ユーザー名を入力してください","Forget your password? ":"パスワードをお忘れの方 ","Have an account? ":"アカウント登録済みの方 ",Hello:"こんにちは ","Incorrect username or password":"ユーザー名またはパスワードが異なります","Lost your code? ":"コードを紛失した方 ","No account? ":"アカウント未登録の方 ",Password:"パスワード","Phone Number":"電話番号","Resend Code":"確認コードの再送","Reset password":"パスワードのリセット","Reset your password":"パスワードのリセット","Send Code":"コードの送信","Sign In":"サインイン","Sign Out":"サインアウト","Sign in":"サインイン","Sign in to your account":"サインイン","User does not exist":"ユーザーが存在しません",Username:"ユーザー名","Username cannot be empty":"ユーザー名は必須入力です","Username/client id combination not found.":"ユーザー名が見つかりません"}};st["a"].putVocabularies(ut),st["a"].setLanguage("ja"),new r["default"]({router:at,render:function(e){return e(a["default"])}}).$mount("#app")},"5c68":function(e,t,n){},6857:function(e,t,n){"use strict";var r=n("c995"),a=n.n(r);a.a},"6e3e":function(e,t,n){},"80ec":function(e,t,n){e.exports=n.p+"img/computer_school_girl.c552a3e6.png"},"85ec":function(e,t,n){},"8cfc":function(e,t,n){"use strict";var r=n("b5f6"),a=n.n(r);a.a},"8e67":function(e,t){},"99a6":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("p",{attrs:{id:"contents"}},[n("router-view")],1),n("footer",[n("ul",{staticClass:"footer-menu"},[n("li",[n("router-link",{attrs:{to:"/"}},[e._v(" home")]),e._v(" ｜")],1),n("li",[n("router-link",{attrs:{to:"/"}},[e._v(" about")]),e._v("｜")],1),n("li",[n("router-link",{attrs:{to:"/"}},[e._v(" service")])],1)]),n("p",[e._v("© All rights reserved by minraji.")])])])},a=[]},"9a54":function(e,t,n){},b5f6:function(e,t,n){},b6ae:function(e,t,n){"use strict";var r=n("5c68"),a=n.n(r);a.a},be37:function(e,t){},c06c:function(e,t,n){"use strict";var r=n("9a54"),a=n.n(r);a.a},c995:function(e,t,n){},d506:function(e,t,n){e.exports=n.p+"img/radio_taisou.128ea973.png"}});
//# sourceMappingURL=app.e6dbe11f.js.map