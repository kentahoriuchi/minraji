{"remainingRequest":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mech-user/Documents/minraji/utsprint/minraji/src/components/in_the_room.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/src/components/in_the_room.vue","mtime":1590497442430},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":1590497441462},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/thread-loader/dist/cjs.js","mtime":1590497442294},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/babel-loader/lib/index.js","mtime":1590497441362},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":1590497441462},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/vue-loader/lib/index.js","mtime":1590497442326}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUEksIHsgIGdyYXBocWxPcGVyYXRpb24gfSBmcm9tICdAYXdzLWFtcGxpZnkvYXBpJzsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnCmltcG9ydCBWdWVZb3V0dWJlLCB7Z2V0SWRGcm9tVXJsfSBmcm9tICd2dWUteW91dHViZScKaW1wb3J0IHsgZ2V0Um9vbSB9IGZyb20gJy4uL2dyYXBocWwvcXVlcmllcyc7CmltcG9ydCB7IGdldFVzZXIgfSBmcm9tICcuLi9ncmFwaHFsL3F1ZXJpZXMnOwppbXBvcnQgeyBkZWxldGVSb29tIH0gZnJvbSAnLi4vZ3JhcGhxbC9tdXRhdGlvbnMnCmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyL3JvdXRlcicKLy8gaW1wb3J0IFVzZXJTdG9yZSBmcm9tICcuLi9tb2J4L1VzZXJTdG9yZScKaW1wb3J0IHsgdXBkYXRlVXNlciB9IGZyb20gIi4uL2dyYXBocWwvbXV0YXRpb25zIjsKLy8gaW1wb3J0IHsgdXBkYXRlUm9vbSB9IGZyb20gIi4uL2dyYXBocWwvbXV0YXRpb25zIjsKaW1wb3J0IHsgY3JlYXRlTWVzc2FnZSB9IGZyb20gIi4uL2dyYXBocWwvbXV0YXRpb25zIjsKaW1wb3J0IHsgb25DcmVhdGVNZXNzYWdlIH0gZnJvbSAnLi4vZ3JhcGhxbC9zdWJzY3JpcHRpb25zJzsKaW1wb3J0IHsgb25VcGRhdGVSb29tIH0gZnJvbSAnLi4vZ3JhcGhxbC9zdWJzY3JpcHRpb25zJzsKaW1wb3J0IHsgQXV0aCB9IGZyb20gJ2F3cy1hbXBsaWZ5JwppbXBvcnQgeyBsaXN0VXNlcnMgfSBmcm9tICcuLi9ncmFwaHFsL3F1ZXJpZXMnOwovLyBpbXBvcnQgZm9yeW91dHViZSBmcm9tICcuL2ZvcnlvdXR1YmUnCgpWdWUudXNlKFZ1ZVlvdXR1YmUpCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3Jvb20nLAogIC8vIGNvbXBvbmVudHM6IHsKICAvLyAgIGZvcnlvdXR1YmUKICAvLyB9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIHZpZGVvX3VybDogIiIsCiAgICAgIHN1YnNjcmlwdGlvbmNoYXQ6IHt9LAogICAgICBzdWJzY3JpcHRpb25tZW06IHt9LAogICAgICBlcnJvcjogIiIsCiAgICAgIHJvb21JZDogIiIsCiAgICAgIG1lbWJlcnM6IFtdLAogICAgICB1c2VyTmFtZTogIiIsCiAgICAgIHVzZXJJZDogIiIsCiAgICAgIHNob3dDb250ZW50OiBmYWxzZSwKICAgICAgbWVzc2FnZXM6IFtdLAogICAgICBjcmVhdGVkVGltZTogIiIsCiAgICAgIG5vd1RpbWU6ICIiCiAgICAgIC8vIHBsYXllclZhcnM6IHsKICAgICAgLy8gICBhdXRvcGxheTogMAogICAgICAvLyB9CiAgICAgIC8vIHZpZGVvSWQ6ICc3YklCWjZNMC10VScKICAgIH0KICB9LAogIG1ldGhvZHMgOnsKICAgIGFzeW5jIGZldGNoKCl7CiAgICAgIGNvbnN0IGdldHJvb20gPSBhd2FpdCBBUEkuZ3JhcGhxbChncmFwaHFsT3BlcmF0aW9uKGdldFJvb20se2lkOiB0aGlzLnJvb21JZH0pKQogICAgICB0aGlzLm1lc3NhZ2VzID0gZ2V0cm9vbS5kYXRhLmdldFJvb20ubWVzc2FnZXMuaXRlbXMKICAgICAgY29uc29sZS5sb2codGhpcy5tZXNzYWdlcykKICAgIH0sCiAgICBhc3luYyBwbGF5VmlkZW8oKSB7CiAgICAgIC8vIGF3YWl0IHRoaXMucGxheWVyLnNlZWtUbygxMCx0cnVlKQogICAgICBhd2FpdCB0aGlzLnNlbmRTZWVrKDMwKQogICAgICB0aGlzLnBsYXllci5wbGF5VmlkZW8oKQogICAgICBjb25zb2xlLmxvZyhhd2FpdCB0aGlzLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpKQogICAgICAvLyBEbyBzb21ldGhpbmcgYWZ0ZXIgdGhlIHBsYXlWaWRlbyBjb21tYW5kCiAgICAgIC8vIHRoaXMucGxheWVyLnNlZWtUbygxMCkKICAgIH0sCiAgICBhc3luYyByZWFkeSgpIHsKICAgICAgY29uc29sZS5sb2coIk5vdyB3ZSBhcmUgcmVhZHkgZm9yIHN0cmVhbSEhISIpCiAgICAgIC8vdGhpcy5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLnBsYXllci5vblN0YXRlQ2hhbmdlLCApCiAgICAgIGNvbnNvbGUubG9nKGF3YWl0IHRoaXMucGxheWVyLmdldFBsYXllclN0YXRlKCkpCiAgICAgIHRoaXMuc2VuZFNlZWsoMzApCiAgICAgIC8vIHRoaXMucGxheWVyLnNlZWtUbyhNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpLzEwMDApIC0gdGhpcy5jcmVhdGVkVGltZSkKICAgICAgLy8gdGhpcy5wbGF5VmlkZW8oKQogICAgfSwKICAgIGFzeW5jIHBsYXlpbmcoKSB7CiAgICAgIC8vIGF3YWl0IHRoaXMuc2VuZFNlZWsoMzApCiAgICAgIGNvbnNvbGUubG9nKCd3ZSBhcmUgd2F0Y2hpbmchISEnKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpKQogICAgICAvLyB0aGlzLnBsYXllci5zZWVrVG8oMTApCiAgICB9LAogICAgYXN5bmMgY3VlZCgpIHsKICAgICAgY29uc29sZS5sb2coJ2N1ZWQnKQogICAgICBjb25zb2xlLmxvZyhhd2FpdCB0aGlzLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpKQoKICAgIH0sCiAgICBlbmRlZCgpIHsKICAgICAgY29uc29sZS5sb2coJ2VuZGVkJykKICAgICAgY29uc29sZS5sb2codGhpcy5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSkKICAgIH0sCiAgICBwYXVzZWQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdwYXVzZWQnKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpKQogICAgfSwKICAgIGFzeW5jIGJ1ZmZlcmluZygpIHsKICAgICAgY29uc29sZS5sb2coJ2J1ZmZlcmluZycpCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGxheWVyLmdldFBsYXllclN0YXRlKCkpCiAgICAgIHNldFRpbWVvdXQoY29uc29sZS5sb2coJzc3Nzc3NzcnKSw1MDAwKQogICAgICBhd2FpdCB0aGlzLmNoZWNrVGltZSgpCiAgICB9LAogICAgc2VuZFNlZWsoc2Vjb25kcykgewogICAgICB0aGlzLnBsYXllci5zZWVrVG8oc2Vjb25kcykKCiAgICB9LAogICAgY2hhdCgpewogICAgICB0aGlzLnNob3dDb250ZW50ID0gdHJ1ZQogICAgfSwKICAgIGFzeW5jIHNlbmRNZXNzYWdlKCl7CiAgICAgIHZhciBtZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1lc3NhZ2VpbnB1dCIpCiAgICAgIGlmKCFtZXNzYWdlLnZhbHVlKXtyZXR1cm59CiAgICAgIGNvbnN0IGNyZWF0ZW1lc3NhZ2UgPSB7CiAgICAgICAgaWQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgdGhpcy51c2VyTmFtZSwKICAgICAgICB1c2VybmFtZTogdGhpcy51c2VyTmFtZSwKICAgICAgICBjb250ZW50OiBtZXNzYWdlLnZhbHVlLAogICAgICAgIG1lc3NhZ2VSb29taWRJZDogdGhpcy5yb29tSWQKICAgICAgfQogICAgICBtZXNzYWdlLnZhbHVlID0gIiIKICAgICAgYXdhaXQgQVBJLmdyYXBocWwoZ3JhcGhxbE9wZXJhdGlvbihjcmVhdGVNZXNzYWdlLCB7IGlucHV0OiBjcmVhdGVtZXNzYWdlIH0pKQogICAgICAgIC5jYXRjaChlcnJvciA9PiB0aGlzLmVycm9yID0gSlNPTi5zdHJpbmdpZnkoZXJyb3IpKQogICAgfSwKICAgIGFzeW5jIGRlbGV0ZV9yb29tKCl7CiAgICAgIGNvbnN0IHJvb21pID0gewogICAgICAgIGlkOiB0aGlzLnJvb21JZAogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHJvb21pKQogICAgICBhd2FpdCBBUEkuZ3JhcGhxbChncmFwaHFsT3BlcmF0aW9uKGRlbGV0ZVJvb20sIHsgaW5wdXQ6IHJvb21pfSkpCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHRoaXMuZXJyb3IgPSBKU09OLnN0cmluZ2lmeShlcnJvcikpCiAgICAgIHJvdXRlci5wdXNoKHtuYW1lOidyb29tJ30pCiAgICB9LAogICAgc3Vic2NyaWJlKCl7CiAgICAgIC8vIEdyYXBoUUzjgqjjg7Pjg4njg53jgqTjg7Pjg4jjgatzdWJzY3JpcHRpb27jgpLnmbrooYzjgZfjgIFtdXRhdGlvbuOCkuebo+imluOBmeOCiwogICAgICB0aGlzLnN1YnNjcmlwdGlvbmNoYXQgPSBBUEkuZ3JhcGhxbChncmFwaHFsT3BlcmF0aW9uKG9uQ3JlYXRlTWVzc2FnZSkpLnN1YnNjcmliZSh7CiAgICAgICAgbmV4dDogKGV2ZW50RGF0YSkgPT4gewogICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGV2ZW50RGF0YS52YWx1ZS5kYXRhLm9uQ3JlYXRlTWVzc2FnZTsKICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2Uucm9vbWlkKQogICAgICAgICAgaWYobWVzc2FnZS5yb29taWQuaWQgPT09IHRoaXMucm9vbUlkKXsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSksCiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ubWVtID0gQVBJLmdyYXBocWwoZ3JhcGhxbE9wZXJhdGlvbihvblVwZGF0ZVJvb20pKS5zdWJzY3JpYmUoewogICAgICAgIG5leHQ6IChldmVudERhdGEpID0+IHsKICAgICAgICAgIGNvbnN0IG1lbWJlciA9IGV2ZW50RGF0YS52YWx1ZS5kYXRhLm9uVXBkYXRlUm9vbTsKICAgICAgICAgIGNvbnNvbGUubG9nKG1lbWJlci51c2Vycy5pdGVtcykKICAgICAgICAgIGlmKG1lbWJlci5pZCA9PT0gdGhpcy5yb29tSWQpewogICAgICAgICAgICB0aGlzLm1lbWJlcnMgPSBtZW1iZXIudXNlcnMuaXRlbXMKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgYXN5bmMgaW5pdHVzZXJkYXRhKCkgewogICAgICB0cnl7CiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IEF1dGguY3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyKCkKICAgICAgICB0aGlzLnVzZXJOYW1lID0gdXNlci51c2VybmFtZQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgZ2V0dGluZyB1c2VyIGRhdGEuLi4gJywgZXJyKQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKCd1c2VybmFtZTonLHRoaXMudXNlck5hbWUpCiAgICAgIGlmKHRoaXMudXNlck5hbWUgIT09ICcnKXsKICAgICAgICBjb25zdCB1c2VyZGF0YSA9ICBhd2FpdCBBUEkuZ3JhcGhxbChncmFwaHFsT3BlcmF0aW9uKGxpc3RVc2VycywgeyBmaWx0ZXI6IHsndXNlcm5hbWUnOntlcTogdGhpcy51c2VyTmFtZX19fSkpCiAgICAgICAgY29uc29sZS5sb2codXNlcmRhdGEuZGF0YS5saXN0VXNlcnMuaXRlbXNbMF0uaWQpCiAgICAgICAgdGhpcy51c2VySWQgPSB1c2VyZGF0YS5kYXRhLmxpc3RVc2Vycy5pdGVtc1swXS5pZAogICAgICB9CiAgICB9LAogICAgY2xvc2VNb2RlbDogZnVuY3Rpb24oKXsKICAgICAgdGhpcy5zaG93Q29udGVudCA9IGZhbHNlCiAgICB9LAogICAgaW5pdGlhbGl6ZWRhdGUoKXsKICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsKICAgICAgdG9kYXkuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkpOwogICAgICB2YXIgeXl5eSA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7CiAgICAgIHZhciBtbSA9ICgiMCIrKHRvZGF5LmdldE1vbnRoKCkrMSkpLnNsaWNlKC0yKTsKICAgICAgdmFyIGRkID0gKCIwIit0b2RheS5nZXREYXRlKCkpLnNsaWNlKC0yKTsKICAgICAgdmFyIGhoID0gKCIwIisodG9kYXkuZ2V0SG91cnMoKSkpLnNsaWNlKC0yKTsKICAgICAgdmFyIG1pbiA9ICgiMCIrKHRvZGF5LmdldE1pbnV0ZXMoKSkpLnNsaWNlKC0yKTsKICAgICAgdmFyIHNlYyA9ICgiMCIrKHRvZGF5LmdldFNlY29uZHMoKSkpLnNsaWNlKC0yKTsKICAgICAgdGhpcy5ub3dUaW1lID0geXl5eSsnLScrbW0rJy0nK2RkICsiICIrIGhoKyc6JyttaW4rJzonK3NlYzsKICAgIH0sCiAgICBjaGVja1RpbWUoKXsKICAgICAgdGhpcy5pbml0aWFsaXplZGF0ZSgpCiAgICAgIGNvbnN0IHdvcmRzQ3JlYXRlZCA9IHRoaXMuY3JlYXRlZFRpbWUuc3BsaXQoJyAnKTsKICAgICAgY29uc3Qgd29yZHNOb3cgPSB0aGlzLm5vd1RpbWUuc3BsaXQoJyAnKTsKICAgICAgY29uc29sZS5sb2coIHdvcmRzQ3JlYXRlZFswXSkKICAgICAgY29uc29sZS5sb2coIHdvcmRzTm93WzBdKQogICAgICBpZih3b3Jkc0NyZWF0ZWRbMF0ubWF0Y2god29yZHNOb3dbMF0pICE9IC8oXGR7NH0pLShcZHsyfSktKFxkezJ9KS8pewogICAgICAgIGNvbnNvbGUubG9nKCJkYXkgbWF0Y2hlZCEiKQogICAgICAgIGNvbnN0IHRpbWVDcmVhdGVkID0gd29yZHNDcmVhdGVkWzFdLnNwbGl0KCc6JykKICAgICAgICBjb25zdCB0aW1lTm93ID0gd29yZHNOb3dbMV0uc3BsaXQoJzonKQogICAgICAgIGNvbnN0IHRpbWVGcm9tU3RhcnQgPSAodGltZU5vd1swXSAtIHRpbWVDcmVhdGVkWzBdKSozNjAwICsgKHRpbWVOb3dbMV0gLSB0aW1lQ3JlYXRlZFsxXSkqNjAgKyAodGltZU5vd1syXSAtIHRpbWVDcmVhdGVkWzJdKQogICAgICAgIGNvbnNvbGUubG9nKHRpbWVGcm9tU3RhcnQpCiAgICAgICAgLy8gY29uc29sZS5sb2coInRpbWUgaXMgZmFyISBtb3Zpbmcgbm93IikKICAgICAgICBpZih0aW1lRnJvbVN0YXJ0IDwgMCl7CiAgICAgICAgICB0aGlzLnBsYXllci5wYXVzZVZpZGVvKCkKICAgICAgICAgIGNvbnNvbGUubG9nKCd3YWl0aW5nJykKICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5wbGF5ZXIucGxheVZpZGVvKCksTWF0aC5hYnModGltZUZyb21TdGFydCoxMDAwKSkKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuc2VuZFNlZWsodGltZUZyb21TdGFydCkgIAogICAgICAgIH0KICAgICAgICAKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBsYXllcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJlZnMueW91dHViZS5wbGF5ZXIKICAgIH0sCgogIH0sCiAgYXN5bmMgY3JlYXRlZCgpewogICAgYXdhaXQgdGhpcy5pbml0dXNlcmRhdGEoKQogICAgY29uc3QgdXNlcl9pZCA9IGF3YWl0IEFQSS5ncmFwaHFsKGdyYXBocWxPcGVyYXRpb24oZ2V0VXNlcix7aWQ6IHRoaXMudXNlcklkfSkpCiAgICBjb25zb2xlLmxvZyh1c2VyX2lkLmRhdGEuZ2V0VXNlci5yb29taWQpCiAgICBjb25zdCByb29tX2luZm8gPSB1c2VyX2lkLmRhdGEuZ2V0VXNlci5yb29taWQKICAgIHRoaXMudmlkZW9fdXJsID0gZ2V0SWRGcm9tVXJsKHJvb21faW5mby5tb3ZpZSkKICAgIHRoaXMucm9vbUlkID0gcm9vbV9pbmZvLmlkCiAgICB0aGlzLmNyZWF0ZWRUaW1lID0gcm9vbV9pbmZvLnJlc2VydmVkdGltZQogICAgY29uc3QgbWVtYmVyID0gYXdhaXQgQVBJLmdyYXBocWwoZ3JhcGhxbE9wZXJhdGlvbihnZXRSb29tLHtpZDogdGhpcy5yb29tSWR9KSkKICAgIHRoaXMubWVtYmVycyA9IG1lbWJlci5kYXRhLmdldFJvb20udXNlcnMuaXRlbXMKICAgIGNvbnNvbGUubG9nKHRoaXMubWVtYmVycy5sZW5ndGgpCiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnZpZGVvX3VybCkKICAgIGNvbnNvbGUubG9nKCJjcmVhdGVkOiAiICsgdGhpcy5jcmVhdGVkVGltZSkKICAgIGNvbnNvbGUubG9nKCJub3c6ICIgKyB0aGlzLm5vd1RpbWUpCiAgICB0aGlzLmZldGNoKCkKICAgIHRoaXMuc3Vic2NyaWJlKCkKICAgIC8vdGhpcy5jcmVhdGVkVGltZSA9IGdldF9jcmVhdGVkX3RpbWUodXNlcmlkKQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgICAgLy/jg4Hjg6Pjg4Pjg4jnlLvpnaLjgYvjgonpm6LjgozjgovpmpvjgavjgIFVblN1YnNjcmliZeOBmeOCiwogICAgICB0aGlzLnN1YnNjcmlwdGlvbmNoYXQudW5zdWJzY3JpYmUoKTsKICAgICAgdGhpcy5zdWJzY3JpcHRpb25tZW0udW5zdWJzY3JpYmUoKTsKICAgIH0sCiAgYXN5bmMgZGVzdHJveWVkKCl7CiAgICBjb25zdCB1cGRhdGVkYXRhID0gewogICAgICAgIGlkOiB0aGlzLnVzZXJJZCwKICAgICAgICB1c2VyUm9vbWlkSWQ6IG51bGwKICAgICAgfQogICAgYXdhaXQgQVBJLmdyYXBocWwoZ3JhcGhxbE9wZXJhdGlvbih1cGRhdGVVc2VyLCB7IGlucHV0OiB1cGRhdGVkYXRhIH0pKQogICAgICAuY2F0Y2goZXJyb3IgPT4gdGhpcy5lcnJvciA9IEpTT04uc3RyaW5naWZ5KGVycm9yKSkKICB9Cn0KCi8qCmZ1bmN0aW9uIGdldF9jcmVhdGVkX3RpbWUodXNlcmlkKXsKICBpZiAodXNlcmlkLmRhdGEubGlzdFVzZXJzLml0ZW1zWzBdLnJvb21pZC50aW1lICE9PSAvXGR7MTB9L2cpIHsKICAgIGNvbnN0IHJvb20gPXsKICAgICAgaWQ6IHVzZXJpZC5kYXRhLmxpc3RVc2Vycy5pdGVtc1swXS5yb29taWQuaWQsCiAgICAgIHRpbWU6IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkvMTAwMCkKICAgIH0KICAgIGNvbnNvbGUubG9nKCJ0aW1lIGlzIE5PVCBzZXQgaW4gdGhpcyByb29tLiBUaGUgdGltZSBpcyAiICsgcm9vbS50aW1lICsgIiBub3cgYW5kIHdhcyBzZXQuIikKICAgIGNvbnNvbGUubG9nKCJyb29tIGlzICIgKyByb29tLmlkKQogICAgQVBJLmdyYXBocWwoZ3JhcGhxbE9wZXJhdGlvbih1cGRhdGVSb29tLCB7IGlucHV0OiByb29tfSkpCiAgICAudGhlbihjb25zb2xlLmxvZygic2V0IHN1Y2Nlc3NmdWxseSEiKSkKICAgIC5jYXRjaChlcnJvciA9PiB0aGlzLmVycm9yID0gSlNPTi5zdHJpbmdpZnkoZXJyb3IpKQogICAgcmV0dXJuIG5ldyByb29tLnRpbWUKICB9CiAgZWxzZXsKICAgIGNvbnNvbGUubG9nKCJ0aW1lIGlzIHNldCBpbiB0aGlzIHJvb20uIHRoZSB0aW1lIGlzICIgKyB1c2VyaWQuZGF0YS5saXN0VXNlcnMuaXRlbXNbMF0ucm9vbWlkLnRpbWUpCiAgICByZXR1cm4gdXNlcmlkLmRhdGEubGlzdFVzZXJzLml0ZW1zWzBdLnJvb21pZC50aW1lCiAgfQp9CiovCi8vZnVuY3Rpb24gc2VuZFNlZWsoc2Vjb25kcykgewogIC8vIHRoaXMucGxheWVyLnNlZWtUbyh0aGlzLnNlY29uZHMpCi8vfQoK"},{"version":3,"sources":["in_the_room.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"in_the_room.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<!-- 部屋の中の画面、へやのidによって画面が異なる -->\n<div>\n<header>\n<h1 class=\"headline\">\n      <a>みんラジ!</a>\n</h1>\n  <ul class=\"nav-list\">\n\n      <li class=\"nav-list-item\"><router-link to=\"/\"><button id=\"back-home-button\">ホーム</button></router-link></li>\n      <li class=\"nav-list-item\"><!-- 待機部屋に移動 --><router-link to=\"/room\"><button id=\"go-room-button\">ルーム広場に戻る</button></router-link></li>\n      <li class=\"nav-list-item\"><amplify-sign-out></amplify-sign-out></li>\n  </ul>\t\n</header>\n<main>\n<section>\n    <h2>ルーム</h2>\n\n    <p>ここはルームの中です。動画をみてラジオ体操をしましょう。\n      ラジオ体操が終わったら「ルームを消す」ボタンを押して、ルーム広場に戻りましょう。</p>\n    <div id=\"all-members\">  \n    <h2>参加者一覧</h2>\n    参加者 : {{members.length}} 名\n    <div  v-for=\"member in members\" :key=\"member.id\">\n      {{member.username}}\n    </div>\n    </div>\n   \n    \n    <!-- video-id youtubeの動画のid -->\n    <!--<youtube :video-id=\"video_url\" ref=\"youtube\" @playing=\"playing\"></youtube> -->\n</section>\n    \n<section>   \n    <!-- video-id youtubeの動画のid -->\n    <div align=\"center\"><youtube :video-id=\"video_url\" ref=\"youtube\" \n      @playing=\"playing\" \n      @cued=\"cued\" \n      @ready=\"ready\" \n      @ended=\"ended\" \n      @paused=\"paused\"\n      @buffering=\"buffering\">\n    </youtube>\n    </div>\n    <br>\n    \n    \n  <div id=\"two-buttons-up\">\n      <button v-on:click=\"playVideo\" id=\"play-button\">play</button>\n  <button v-on:click=\"chat\" id=\"chat-button\">チャットする</button>\n  </div>\n\n  <div id=\"two-buttons-down\">\n  <!-- ルームを消す--><button id=\"delete-room-button\" v-on:click=\"delete_room\">ルームを消す</button>\n    <router-link to=\"/room\"><button id=\"go-room-button\">ルーム広場に戻る</button></router-link>\n  </div>\n\n\n  <div id='overlay' v-show='showContent'>\n    <div id=\"main-contents\">\n    <div v-for=\"message in messages\" :key=\"message.id\">\n    <div id=\"message_base\">\n    <div v-bind:class=\"[message.username === userName ? 'message' : 'message_opponent']\">{{message.content}}</div>\n    <div v-bind:class=\"[message.username === userName ? 'username' : 'username_opponent']\">{{message.username}}</div>\n    </div>\n    </div>\n  </div>\n  <table>\n  <tr>\n  <div>\n  <input id=\"messageinput\" placeholder=\"メッセージを入力してください\" size=\"25\" type='text' value=\"\"/>\n  </div>\n  </tr>\n  <tr>\n  <div>\n  <button id = \"sendMessage\" v-on:click=\"sendMessage\">送る</button>\n  <button id=\"chat-close\" v-on:click='closeModel'>閉じる</button>\n  </div>\n  </tr>\n  </table>\n</div>\n    \n    \n\n\n</section>\n</main>\n</div>\n</template>\n\n<script>\nimport API, {  graphqlOperation } from '@aws-amplify/api';\nimport Vue from 'vue'\nimport VueYoutube, {getIdFromUrl} from 'vue-youtube'\nimport { getRoom } from '../graphql/queries';\nimport { getUser } from '../graphql/queries';\nimport { deleteRoom } from '../graphql/mutations'\nimport router from '../router/router'\n// import UserStore from '../mobx/UserStore'\nimport { updateUser } from \"../graphql/mutations\";\n// import { updateRoom } from \"../graphql/mutations\";\nimport { createMessage } from \"../graphql/mutations\";\nimport { onCreateMessage } from '../graphql/subscriptions';\nimport { onUpdateRoom } from '../graphql/subscriptions';\nimport { Auth } from 'aws-amplify'\nimport { listUsers } from '../graphql/queries';\n// import foryoutube from './foryoutube'\n\nVue.use(VueYoutube)\n\nexport default {\n  name: 'room',\n  // components: {\n  //   foryoutube\n  // },\n  data(){\n    return {\n      video_url: \"\",\n      subscriptionchat: {},\n      subscriptionmem: {},\n      error: \"\",\n      roomId: \"\",\n      members: [],\n      userName: \"\",\n      userId: \"\",\n      showContent: false,\n      messages: [],\n      createdTime: \"\",\n      nowTime: \"\"\n      // playerVars: {\n      //   autoplay: 0\n      // }\n      // videoId: '7bIBZ6M0-tU'\n    }\n  },\n  methods :{\n    async fetch(){\n      const getroom = await API.graphql(graphqlOperation(getRoom,{id: this.roomId}))\n      this.messages = getroom.data.getRoom.messages.items\n      console.log(this.messages)\n    },\n    async playVideo() {\n      // await this.player.seekTo(10,true)\n      await this.sendSeek(30)\n      this.player.playVideo()\n      console.log(await this.player.getPlayerState())\n      // Do something after the playVideo command\n      // this.player.seekTo(10)\n    },\n    async ready() {\n      console.log(\"Now we are ready for stream!!!\")\n      //this.player.addEventListener(this.player.onStateChange, )\n      console.log(await this.player.getPlayerState())\n      this.sendSeek(30)\n      // this.player.seekTo(Math.floor(new Date().getTime()/1000) - this.createdTime)\n      // this.playVideo()\n    },\n    async playing() {\n      // await this.sendSeek(30)\n      console.log('we are watching!!!')\n      console.log(this.player.getPlayerState())\n      // this.player.seekTo(10)\n    },\n    async cued() {\n      console.log('cued')\n      console.log(await this.player.getPlayerState())\n\n    },\n    ended() {\n      console.log('ended')\n      console.log(this.player.getPlayerState())\n    },\n    paused() {\n      console.log('paused')\n      console.log(this.player.getPlayerState())\n    },\n    async buffering() {\n      console.log('buffering')\n      console.log(this.player.getPlayerState())\n      setTimeout(console.log('7777777'),5000)\n      await this.checkTime()\n    },\n    sendSeek(seconds) {\n      this.player.seekTo(seconds)\n\n    },\n    chat(){\n      this.showContent = true\n    },\n    async sendMessage(){\n      var message = document.getElementById(\"messageinput\")\n      if(!message.value){return}\n      const createmessage = {\n        id: new Date().getTime() + this.userName,\n        username: this.userName,\n        content: message.value,\n        messageRoomidId: this.roomId\n      }\n      message.value = \"\"\n      await API.graphql(graphqlOperation(createMessage, { input: createmessage }))\n        .catch(error => this.error = JSON.stringify(error))\n    },\n    async delete_room(){\n      const roomi = {\n        id: this.roomId\n      }\n      console.log(roomi)\n      await API.graphql(graphqlOperation(deleteRoom, { input: roomi}))\n        .catch(error => this.error = JSON.stringify(error))\n      router.push({name:'room'})\n    },\n    subscribe(){\n      // GraphQLエンドポイントにsubscriptionを発行し、mutationを監視する\n      this.subscriptionchat = API.graphql(graphqlOperation(onCreateMessage)).subscribe({\n        next: (eventData) => {\n          const message = eventData.value.data.onCreateMessage;\n          console.log(message.roomid)\n          if(message.roomid.id === this.roomId){\n            this.messages.push(message);\n          }\n        }\n      }),\n      this.subscriptionmem = API.graphql(graphqlOperation(onUpdateRoom)).subscribe({\n        next: (eventData) => {\n          const member = eventData.value.data.onUpdateRoom;\n          console.log(member.users.items)\n          if(member.id === this.roomId){\n            this.members = member.users.items\n          }\n        }\n      })\n    },\n    async inituserdata() {\n      try{\n        const user = await Auth.currentAuthenticatedUser()\n        this.userName = user.username\n      } catch (err) {\n        console.log('error getting user data... ', err)\n      }\n      console.log('username:',this.userName)\n      if(this.userName !== ''){\n        const userdata =  await API.graphql(graphqlOperation(listUsers, { filter: {'username':{eq: this.userName}}}))\n        console.log(userdata.data.listUsers.items[0].id)\n        this.userId = userdata.data.listUsers.items[0].id\n      }\n    },\n    closeModel: function(){\n      this.showContent = false\n    },\n    initializedate(){\n      var today = new Date();\n      today.setDate(today.getDate());\n      var yyyy = today.getFullYear();\n      var mm = (\"0\"+(today.getMonth()+1)).slice(-2);\n      var dd = (\"0\"+today.getDate()).slice(-2);\n      var hh = (\"0\"+(today.getHours())).slice(-2);\n      var min = (\"0\"+(today.getMinutes())).slice(-2);\n      var sec = (\"0\"+(today.getSeconds())).slice(-2);\n      this.nowTime = yyyy+'-'+mm+'-'+dd +\" \"+ hh+':'+min+':'+sec;\n    },\n    checkTime(){\n      this.initializedate()\n      const wordsCreated = this.createdTime.split(' ');\n      const wordsNow = this.nowTime.split(' ');\n      console.log( wordsCreated[0])\n      console.log( wordsNow[0])\n      if(wordsCreated[0].match(wordsNow[0]) != /(\\d{4})-(\\d{2})-(\\d{2})/){\n        console.log(\"day matched!\")\n        const timeCreated = wordsCreated[1].split(':')\n        const timeNow = wordsNow[1].split(':')\n        const timeFromStart = (timeNow[0] - timeCreated[0])*3600 + (timeNow[1] - timeCreated[1])*60 + (timeNow[2] - timeCreated[2])\n        console.log(timeFromStart)\n        // console.log(\"time is far! moving now\")\n        if(timeFromStart < 0){\n          this.player.pauseVideo()\n          console.log('waiting')\n          setTimeout(this.player.playVideo(),Math.abs(timeFromStart*1000))\n        }else{\n          this.sendSeek(timeFromStart)  \n        }\n        \n      }\n    }\n  },\n  computed: {\n    player() {\n      return this.$refs.youtube.player\n    },\n\n  },\n  async created(){\n    await this.inituserdata()\n    const user_id = await API.graphql(graphqlOperation(getUser,{id: this.userId}))\n    console.log(user_id.data.getUser.roomid)\n    const room_info = user_id.data.getUser.roomid\n    this.video_url = getIdFromUrl(room_info.movie)\n    this.roomId = room_info.id\n    this.createdTime = room_info.reservedtime\n    const member = await API.graphql(graphqlOperation(getRoom,{id: this.roomId}))\n    this.members = member.data.getRoom.users.items\n    console.log(this.members.length)\n    // console.log(this.video_url)\n    console.log(\"created: \" + this.createdTime)\n    console.log(\"now: \" + this.nowTime)\n    this.fetch()\n    this.subscribe()\n    //this.createdTime = get_created_time(userid)\n  },\n  beforeDestroy() {\n      //チャット画面から離れる際に、UnSubscribeする\n      this.subscriptionchat.unsubscribe();\n      this.subscriptionmem.unsubscribe();\n    },\n  async destroyed(){\n    const updatedata = {\n        id: this.userId,\n        userRoomidId: null\n      }\n    await API.graphql(graphqlOperation(updateUser, { input: updatedata }))\n      .catch(error => this.error = JSON.stringify(error))\n  }\n}\n\n/*\nfunction get_created_time(userid){\n  if (userid.data.listUsers.items[0].roomid.time !== /\\d{10}/g) {\n    const room ={\n      id: userid.data.listUsers.items[0].roomid.id,\n      time: Math.floor(new Date().getTime()/1000)\n    }\n    console.log(\"time is NOT set in this room. The time is \" + room.time + \" now and was set.\")\n    console.log(\"room is \" + room.id)\n    API.graphql(graphqlOperation(updateRoom, { input: room}))\n    .then(console.log(\"set successfully!\"))\n    .catch(error => this.error = JSON.stringify(error))\n    return new room.time\n  }\n  else{\n    console.log(\"time is set in this room. the time is \" + userid.data.listUsers.items[0].roomid.time)\n    return userid.data.listUsers.items[0].roomid.time\n  }\n}\n*/\n//function sendSeek(seconds) {\n  // this.player.seekTo(this.seconds)\n//}\n\n</script>\n\n<style src=\"./chat.css\" />\n\n\n"]}]}