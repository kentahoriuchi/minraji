{"remainingRequest":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/babel-loader/lib/index.js!/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/eslint-loader/index.js??ref--13-0!/home/vagrant/workspace/minraji/utsprint/minraji/src/router/router.js","dependencies":[{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/src/router/router.js","mtime":1588818847000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":1588818758000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/babel-loader/lib/index.js","mtime":1588818754000},{"path":"/home/vagrant/workspace/minraji/utsprint/minraji/node_modules/eslint-loader/index.js","mtime":1588818781000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3ZhZ3JhbnQvd29ya3NwYWNlL21pbnJhamkvdXRzcHJpbnQvbWlucmFqaS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IExvZ2luIGZyb20gJ0AvY29tcG9uZW50cy9Mb2dpbic7CmltcG9ydCBIb21lIGZyb20gJ0AvY29tcG9uZW50cy9Ib21lJzsgLy8gQW1wbGlmeeiqreOBv+i+vOOBvwoKaW1wb3J0IHsgQW1wbGlmeUV2ZW50QnVzIH0gZnJvbSAnYXdzLWFtcGxpZnktdnVlJzsKaW1wb3J0IHsgQW1wbGlmeVBsdWdpbiB9IGZyb20gJ2F3cy1hbXBsaWZ5LXZ1ZSc7CmltcG9ydCBBbXBsaWZ5TW9kdWxlcyBmcm9tICdhd3MtYW1wbGlmeSc7ClZ1ZS51c2UoQW1wbGlmeVBsdWdpbiwgQW1wbGlmeU1vZHVsZXMpOwpWdWUudXNlKFJvdXRlcik7CnZhciB1c2VyOyAvLyDjg6bjg7zjgrbjg7znrqHnkIYKCmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgaWYgKHVzZXIpIHsKICAgIHJvdXRlci5wdXNoKHsKICAgICAgcGF0aDogJy8nCiAgICB9KTsKICB9Cn0pOwoKZnVuY3Rpb24gZ2V0VXNlcigpIHsKICByZXR1cm4gVnVlLnByb3RvdHlwZS4kQW1wbGlmeS5BdXRoLmN1cnJlbnRBdXRoZW50aWNhdGVkVXNlcigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgIGlmIChkYXRhICYmIGRhdGEuc2lnbkluVXNlclNlc3Npb24pIHsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIG51bGw7CiAgfSk7Cn0gLy8g44Ot44Kw44Kk44Oz54q25oWL566h55CGCgoKQW1wbGlmeUV2ZW50QnVzLiRvbignYXV0aFN0YXRlJywgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShzdGF0ZSkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIShzdGF0ZSA9PT0gJ3NpZ25lZE91dCcpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHVzZXIgPSBudWxsOwogICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBpZiAoIShzdGF0ZSA9PT0gJ3NpZ25lZEluJykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gZ2V0VXNlcigpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgdXNlciA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKdmFyIHJvdXRlciA9IG5ldyBSb3V0ZXIoewogIG1vZGU6ICdoaXN0b3J5JywKICByb3V0ZXM6IFt7CiAgICBwYXRoOiAnL2xvZ2luJywKICAgIG5hbWU6ICdsb2dpbicsCiAgICBjb21wb25lbnQ6IExvZ2luCiAgfSwgewogICAgcGF0aDogJy8nLAogICAgbmFtZTogJ2hvbWUnLAogICAgY29tcG9uZW50OiBIb21lLAogICAgbWV0YTogewogICAgICByZXF1aXJlQXV0aDogdHJ1ZQogICAgfQogIH1dCn0pOwpyb3V0ZXIuYmVmb3JlUmVzb2x2ZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIXRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZC5tZXRhLnJlcXVpcmVzQXV0aDsKICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGdldFVzZXIoKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHVzZXIgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgbmV4dCh7CiAgICAgICAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIG5leHQoKSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gyLCBfeDMsIF94NCkgewogICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/home/vagrant/workspace/minraji/utsprint/minraji/src/router/router.js"],"names":["Vue","Router","Login","Home","AmplifyEventBus","AmplifyPlugin","AmplifyModules","use","user","getUser","then","router","push","path","prototype","$Amplify","Auth","currentAuthenticatedUser","data","signInUserSession","catch","$on","state","mode","routes","name","component","meta","requireAuth","beforeResolve","to","from","next","matched","some","record","requiresAuth"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport Login from '@/components/Login'\nimport Home from '@/components/Home'\n\n\n// Amplify読み込み\nimport {  AmplifyEventBus } from 'aws-amplify-vue'\nimport { AmplifyPlugin } from 'aws-amplify-vue'\nimport AmplifyModules from 'aws-amplify'\n\nVue.use(AmplifyPlugin, AmplifyModules)\nVue.use(Router)\n\nlet user;\n\n// ユーザー管理\ngetUser().then((user) => {\n    if (user) {\n        router.push({path: '/'});\n    }\n});\n\nfunction getUser() {\n    return Vue.prototype.$Amplify.Auth.currentAuthenticatedUser().then((data) => {\n        if (data && data.signInUserSession) {\n            return data;\n        }\n    }).catch(() => {\n        return null;\n    });\n}\n\n// ログイン状態管理\nAmplifyEventBus.$on('authState', async (state) => {\n    if (state === 'signedOut'){\n        user = null;\n        router.push({path: '/login'});\n    } else if (state === 'signedIn') {\n        user = await getUser();\n        router.push({path: '/'});\n    }\n});\n\nconst router = new Router({\n    mode:'history',\n\n  routes: [\n    {\n      path: '/login',\n      name: 'login',\n      component: Login\n    },\n    {\n      path: '/',\n      name: 'home',\n      component: Home,\n      meta:{ requireAuth:true}\n    }\n  ]\n})\n\nrouter.beforeResolve(async (to, from, next) => {\n    if (to.matched.some(record => record.meta.requiresAuth)) {\n        user = await getUser();\n        if (!user) {\n            return next({\n                path: '/login'\n            });\n        }\n        return next()\n    }\n    return next()\n});\n\nexport default router"]}]}