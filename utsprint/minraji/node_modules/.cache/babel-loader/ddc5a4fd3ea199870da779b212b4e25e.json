{"remainingRequest":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/thread-loader/dist/cjs.js!/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/babel-loader/lib/index.js!/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/eslint-loader/index.js??ref--13-0!/home/mech-user/Documents/minraji/utsprint/minraji/src/mobx/UserStore.js","dependencies":[{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/src/mobx/UserStore.js","mtime":1590497442434},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/cache-loader/dist/cjs.js","mtime":1590497441462},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/thread-loader/dist/cjs.js","mtime":1590497442294},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/babel-loader/lib/index.js","mtime":1590497441362},{"path":"/home/mech-user/Documents/minraji/utsprint/minraji/node_modules/eslint-loader/index.js","mtime":1590497441778}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbWVjaC11c2VyL0RvY3VtZW50cy9taW5yYWppL3V0c3ByaW50L21pbnJhamkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL21lY2gtdXNlci9Eb2N1bWVudHMvbWlucmFqaS91dHNwcmludC9taW5yYWppL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvbWVjaC11c2VyL0RvY3VtZW50cy9taW5yYWppL3V0c3ByaW50L21pbnJhamkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IEFQSSwgeyBncmFwaHFsT3BlcmF0aW9uIH0gZnJvbSAnQGF3cy1hbXBsaWZ5L2FwaSc7CmltcG9ydCB7IEF1dGggfSBmcm9tICdhd3MtYW1wbGlmeSc7CmltcG9ydCB7IGxpc3RVc2VycyB9IGZyb20gJy4uL2dyYXBocWwvcXVlcmllcyc7CmltcG9ydCB7IGNyZWF0ZVVzZXIgYXMgX2NyZWF0ZVVzZXIgfSBmcm9tICIuLi9ncmFwaHFsL211dGF0aW9ucyI7IC8vIGltcG9ydCB7IG9ic2VydmFibGUsIGRlY29yYXRlIH0gZnJvbSAnbW9ieCcKCnZhciBVc2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBVc2VyKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVzZXIpOwoKICAgIHRoaXMudXNlck5hbWUgPSAnJzsKICAgIHRoaXMudXNlcmlkID0gJyc7CiAgICB0aGlzLmluaXQoKTsKICB9CgogIF9jcmVhdGVDbGFzcyhVc2VyLCBbewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHVzZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBBdXRoLmN1cnJlbnRBdXRoZW50aWNhdGVkVXNlcigpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB1c2VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMudXNlck5hbWUgPSB1c2VyLnVzZXJuYW1lOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBnZXR0aW5nIHVzZXIgZGF0YS4uLiAnLCBfY29udGV4dC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndXNlcm5hbWU6JywgdGhpcy51c2VyTmFtZSk7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlck5hbWUgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tJZlVzZXJFeGlzdHModGhpcy51c2VyTmFtZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzAsIDddXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgICAgcmV0dXJuIF9pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpbml0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiY2hlY2tJZlVzZXJFeGlzdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jaGVja0lmVXNlckV4aXN0cyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodXNlcm5hbWUpIHsKICAgICAgICB2YXIgdXNlcmRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBBUEkuZ3JhcGhxbChncmFwaHFsT3BlcmF0aW9uKGxpc3RVc2VycywgewogICAgICAgICAgICAgICAgICBmaWx0ZXI6IHsKICAgICAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB7CiAgICAgICAgICAgICAgICAgICAgICBlcTogdXNlcm5hbWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdXNlcmRhdGEgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXJkYXRhLmRhdGEubGlzdFVzZXJzLml0ZW1zKTsKCiAgICAgICAgICAgICAgICBpZiAoIXVzZXJkYXRhLmRhdGEubGlzdFVzZXJzLml0ZW1zLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVVzZXIoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0nKTsKICAgICAgICAgICAgICAgICAgdGhpcy51c2VyaWQgPSB1c2VyZGF0YS5kYXRhLmxpc3RVc2Vycy5pdGVtc1swXS5pZDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY2hlY2tJZlVzZXJFeGlzdHMoX3gpIHsKICAgICAgICByZXR1cm4gX2NoZWNrSWZVc2VyRXhpc3RzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjaGVja0lmVXNlckV4aXN0czsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNyZWF0ZVVzZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jcmVhdGVVc2VyMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIG5ld3VzZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIG5ld3VzZXIgPSB7CiAgICAgICAgICAgICAgICAgIGlkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHRoaXMudXNlck5hbWUsCiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJOYW1lCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIEFQSS5ncmFwaHFsKGdyYXBocWxPcGVyYXRpb24oX2NyZWF0ZVVzZXIsIHsKICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld3VzZXIKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdGhpcy51c2VyLmlkID0gbmV3dXNlci5pZDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCduZXd1c2VyOicsIG5ld3VzZXIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgY3JlYXRpbmcgdXNlciBkYXRhLi4uICcsIF9jb250ZXh0My50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMsIFtbMCwgOF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY3JlYXRlVXNlcigpIHsKICAgICAgICByZXR1cm4gX2NyZWF0ZVVzZXIyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjcmVhdGVVc2VyOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gVXNlcjsKfSgpOyAvLyBkZWNvcmF0ZShVc2VyLCB7Ci8vICAgdXNlcm5hbWU6IG9ic2VydmFibGUsCi8vICAgdXNlcmlkOiBvYnNlcnZhYmxlCi8vIH0pOwoKCmV4cG9ydCBkZWZhdWx0IG5ldyBVc2VyKCk7"},{"version":3,"sources":["/home/mech-user/Documents/minraji/utsprint/minraji/src/mobx/UserStore.js"],"names":["API","graphqlOperation","Auth","listUsers","createUser","User","userName","userid","init","currentAuthenticatedUser","user","username","console","log","checkIfUserExists","graphql","filter","eq","userdata","data","items","length","id","newuser","Date","getTime","input"],"mappings":";;;;AAAA,OAAOA,GAAP,IAAeC,gBAAf,QAAuC,kBAAvC;AACA,SAASC,IAAT,QAAqB,aAArB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,UAAU,IAAVA,WAAT,QAA2B,sBAA3B,C,CACA;;IAEMC,I;AACJ,kBAAa;AAAA;;AACX,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,IAAL;AACD;;;;;;;;;;;;;uBAIsBN,IAAI,CAACO,wBAAL,E;;;AAAbC,gBAAAA,I;AACN,qBAAKJ,QAAL,GAAgBI,IAAI,CAACC,QAArB;;;;;;;AAEAC,gBAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;;;AAEFD,gBAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwB,KAAKP,QAA7B;;AACA,oBAAG,KAAKA,QAAL,KAAkB,EAArB,EAAwB;AACtB,uBAAKQ,iBAAL,CAAuB,KAAKR,QAA5B;AACD;;;;;;;;;;;;;;;;;;;yGAGqBK,Q;;;;;;;uBACEX,GAAG,CAACe,OAAJ,CAAYd,gBAAgB,CAACE,SAAD,EAAY;AAAEa,kBAAAA,MAAM,EAAE;AAAC,gCAAW;AAACC,sBAAAA,EAAE,EAAEN;AAAL;AAAZ;AAAV,iBAAZ,CAA5B,C;;;AAAlBO,gBAAAA,Q;AACNN,gBAAAA,OAAO,CAACC,GAAR,CAAYK,QAAQ,CAACC,IAAT,CAAchB,SAAd,CAAwBiB,KAApC;;AACA,oBAAI,CAACF,QAAQ,CAACC,IAAT,CAAchB,SAAd,CAAwBiB,KAAxB,CAA8BC,MAAnC,EAA0C;AACxC,uBAAKjB,UAAL;AACD,iBAFD,MAGI;AACFQ,kBAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,uBAAKN,MAAL,GAAcW,QAAQ,CAACC,IAAT,CAAchB,SAAd,CAAwBiB,KAAxB,CAA8B,CAA9B,EAAiCE,EAA/C;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;AAKOC,gBAAAA,O,GAAU;AACdD,kBAAAA,EAAE,EAAE,IAAIE,IAAJ,GAAWC,OAAX,KAAuB,KAAKnB,QADlB;AAEdK,kBAAAA,QAAQ,EAAE,KAAKL;AAFD,iB;;uBAIVN,GAAG,CAACe,OAAJ,CAAYd,gBAAgB,CAACG,WAAD,EAAa;AAAEsB,kBAAAA,KAAK,EAAEH;AAAT,iBAAb,CAA5B,C;;;AACN,qBAAKb,IAAL,CAAUY,EAAV,GAAeC,OAAO,CAACD,EAAvB;AAEAV,gBAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBU,OAAvB;;;;;;;AAGAX,gBAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;;;;;;;;;;;;;;;;;;;KAKN;AACA;AACA;AACA;;;AAEA,eAAe,IAAIR,IAAJ,EAAf","sourcesContent":["import API, {  graphqlOperation } from '@aws-amplify/api';\nimport { Auth } from 'aws-amplify'\nimport { listUsers } from '../graphql/queries';\nimport { createUser } from \"../graphql/mutations\";\n// import { observable, decorate } from 'mobx'\n\nclass User {\n  constructor(){\n    this.userName = ''\n    this.userid = ''\n    this.init()\n  }\n\n  async init() {\n    try{\n      const user = await Auth.currentAuthenticatedUser()\n      this.userName = user.username\n    } catch (err) {\n      console.log('error getting user data... ', err)\n    }\n    console.log('username:',this.userName)\n    if(this.userName !== ''){\n      this.checkIfUserExists(this.userName)\n    }\n  }\n\n  async checkIfUserExists(username) {\n    const userdata =  await API.graphql(graphqlOperation(listUsers, { filter: {'username':{eq: username}}}))\n    console.log(userdata.data.listUsers.items)\n    if (!userdata.data.listUsers.items.length){\n      this.createUser()\n    }\n    else{\n      console.log('------------')\n      this.userid = userdata.data.listUsers.items[0].id\n    }\n  }\n\n  async createUser() {\n    try{\n      const newuser = {\n        id: new Date().getTime() + this.userName,\n        username: this.userName\n      }\n      await API.graphql(graphqlOperation(createUser, { input: newuser }))\n      this.user.id = newuser.id\n        \n      console.log('newuser:',newuser)\n    }\n    catch(err){\n      console.log('error creating user data... ', err)\n    }\n  }\n}\n\n// decorate(User, {\n//   username: observable,\n//   userid: observable\n// });\n\nexport default new User()\n"]}]}